<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Byte Busters - 1. Problem Understanding and Definition:</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Byte Busters</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Project</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./proposal.html" rel="" target="">
 <span class="menu-text">Proposal</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./presentation.html" rel="" target="">
 <span class="menu-text">Presentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/INFO526-DataViz/project-01" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-collection-and-import" id="toc-data-collection-and-import" class="nav-link active" data-scroll-target="#data-collection-and-import"><strong>2. Data Collection and Import:</strong></a></li>
  <li><a href="#data-preprocessing-and-cleaning" id="toc-data-preprocessing-and-cleaning" class="nav-link" data-scroll-target="#data-preprocessing-and-cleaning"><strong>3. Data Preprocessing and Cleaning:</strong></a></li>
  <li><a href="#eda-exploratory-data-analysis" id="toc-eda-exploratory-data-analysis" class="nav-link" data-scroll-target="#eda-exploratory-data-analysis"><strong>4. EDA: Exploratory Data Analysis</strong></a></li>
  <li><a href="#model-development" id="toc-model-development" class="nav-link" data-scroll-target="#model-development"><strong>6. Model Development</strong></a>
  <ul class="collapse">
  <li><a href="#model-comparison-bar-chart" id="toc-model-comparison-bar-chart" class="nav-link" data-scroll-target="#model-comparison-bar-chart"><strong>Model Comparison Bar Chart</strong></a></li>
  </ul></li>
  <li><a href="#time-series-analysis" id="toc-time-series-analysis" class="nav-link" data-scroll-target="#time-series-analysis"><strong>7. Time Series Analysis</strong></a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><strong>1. Problem Understanding and Definition:</strong></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Define the problem as understanding and classifying the intensity of UHI effects in Dallas, Arlington, and Denton. The goal is to analyze how urbanization affects local climate variables.</p>
<section id="data-collection-and-import" class="level1">
<h1><strong>2. Data Collection and Import:</strong></h1>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338179467,&quot;user_tz&quot;:420,&quot;elapsed&quot;:1627,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="52">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loading the Libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.impute <span class="im">import</span> KNNImputer</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestClassifier</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestRegressor</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> xgboost <span class="im">import</span> XGBClassifier</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> GradientBoostingClassifier</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> classification_report, confusion_matrix</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.ticker <span class="im">as</span> mtick</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the datasets from CSV files</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>dallas <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/INFO-523-Exercises/project-final-Byte-Busters/main/data/Dallas.csv'</span>, header<span class="op">=</span><span class="st">'infer'</span> ,low_memory<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>arlington <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/INFO-523-Exercises/project-final-Byte-Busters/main/data/Arlington.csv'</span>, header<span class="op">=</span><span class="st">'infer'</span> ,low_memory<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>denton <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/INFO-523-Exercises/project-final-Byte-Busters/main/data/Denton.csv'</span>, header<span class="op">=</span><span class="st">'infer'</span> ,low_memory<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-preprocessing-and-cleaning" class="level1">
<h1><strong>3. Data Preprocessing and Cleaning:</strong></h1>
<div class="cell" data-outputid="a8ab79e3-624f-4998-cf08-6132a9719b31" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337903713,&quot;user_tz&quot;:420,&quot;elapsed&quot;:246,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the 'Date' column to datetime format</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>arlington[<span class="st">'DATE'</span>] <span class="op">=</span> pd.to_datetime(arlington[<span class="st">'DATE'</span>])</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>dallas[<span class="st">'DATE'</span>] <span class="op">=</span> pd.to_datetime(dallas[<span class="st">'DATE'</span>])</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>denton[<span class="st">'DATE'</span>] <span class="op">=</span> pd.to_datetime(denton[<span class="st">'DATE'</span>])</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the columns of interest</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>columns_of_interest <span class="op">=</span> [<span class="st">'DATE'</span>,<span class="st">'HourlyDryBulbTemperature'</span>, <span class="st">'HourlyWetBulbTemperature'</span>, <span class="st">'HourlyDewPointTemperature'</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'HourlyPrecipitation'</span>, <span class="st">'HourlySeaLevelPressure'</span>, <span class="st">'HourlyStationPressure'</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>                       <span class="st">'HourlyRelativeHumidity'</span>, <span class="st">'HourlyWindSpeed'</span>, <span class="st">'HourlyWindDirection'</span>]</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only the columns of interest from each dataset</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>denton <span class="op">=</span> denton[columns_of_interest]</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>dallas <span class="op">=</span> dallas[columns_of_interest]</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>arlington <span class="op">=</span> arlington[columns_of_interest]</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Recheck for missing values</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Remaining Missing Values in Denton Dataset:</span><span class="ch">\n</span><span class="st">"</span>, denton.isnull().<span class="bu">sum</span>())</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Remaining Missing Values in Dallas Dataset:</span><span class="ch">\n</span><span class="st">"</span>, dallas.isnull().<span class="bu">sum</span>())</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Remaining Missing Values in Arlington Dataset:</span><span class="ch">\n</span><span class="st">"</span>, arlington.isnull().<span class="bu">sum</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Remaining Missing Values in Denton Dataset:
 DATE                            0
HourlyDryBulbTemperature      385
HourlyWetBulbTemperature      516
HourlyDewPointTemperature     383
HourlyPrecipitation          1589
HourlySeaLevelPressure       2058
HourlyStationPressure         508
HourlyRelativeHumidity        385
HourlyWindSpeed               434
HourlyWindDirection           434
dtype: int64

Remaining Missing Values in Dallas Dataset:
 DATE                            0
HourlyDryBulbTemperature      384
HourlyWetBulbTemperature      478
HourlyDewPointTemperature     386
HourlyPrecipitation          1340
HourlySeaLevelPressure       1801
HourlyStationPressure         476
HourlyRelativeHumidity        386
HourlyWindSpeed               388
HourlyWindDirection           388
dtype: int64

Remaining Missing Values in Arlington Dataset:
 DATE                            0
HourlyDryBulbTemperature      397
HourlyWetBulbTemperature      548
HourlyDewPointTemperature     397
HourlyPrecipitation          1911
HourlySeaLevelPressure       2251
HourlyStationPressure         529
HourlyRelativeHumidity        397
HourlyWindSpeed               482
HourlyWindDirection           482
dtype: int64</code></pre>
</div>
</div>
<p><strong>Decide on Imputation Strategy:</strong></p>
<p>For numerical columns with missing values, consider mean or median imputation.</p>
<p>For categorical columns, consider mode imputation or assigning a new category like ‘Unknown’.</p>
<p><strong>Step 1: Numerical Imputation</strong></p>
<p>In this step, we will impute missing values in numerical columns using the KNN Imputation.</p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337903714,&quot;user_tz&quot;:420,&quot;elapsed&quot;:4,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>cols_to_impute <span class="op">=</span> [<span class="st">'HourlyDryBulbTemperature'</span>,<span class="st">'HourlyWetBulbTemperature'</span>,<span class="st">'HourlyRelativeHumidity'</span>,<span class="st">'HourlyDewPointTemperature'</span>,<span class="st">'HourlyPrecipitation'</span>,<span class="st">'HourlySeaLevelPressure'</span>,<span class="st">'HourlyStationPressure'</span>,<span class="st">'HourlyWindSpeed'</span>,<span class="st">'HourlyWindDirection'</span>]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.impute <span class="im">import</span> KNNImputer</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Define columns for data type conversion and imputation</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>cols_to_convert <span class="op">=</span> {</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'dallas'</span>: [<span class="st">'HourlyDryBulbTemperature'</span>, <span class="st">'HourlyDewPointTemperature'</span>, <span class="st">'HourlyPrecipitation'</span>, <span class="st">'HourlySeaLevelPressure'</span>, <span class="st">'HourlyStationPressure'</span>, <span class="st">'HourlyWindDirection'</span>],</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'arlington'</span>: [<span class="st">'HourlyDryBulbTemperature'</span>, <span class="st">'HourlyWetBulbTemperature'</span>, <span class="st">'HourlyDewPointTemperature'</span>, <span class="st">'HourlyStationPressure'</span>, <span class="st">'HourlyPrecipitation'</span>, <span class="st">'HourlyWindSpeed'</span>, <span class="st">'HourlySeaLevelPressure'</span>, <span class="st">'HourlyWindDirection'</span>, <span class="st">'HourlyRelativeHumidity'</span>],</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'denton'</span>: [<span class="st">'HourlyDryBulbTemperature'</span>, <span class="st">'HourlyDewPointTemperature'</span>, <span class="st">'HourlyStationPressure'</span>, <span class="st">'HourlyPrecipitation'</span>, <span class="st">'HourlyWindSpeed'</span>, <span class="st">'HourlyWindDirection'</span>]</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>cols_to_impute <span class="op">=</span> [<span class="st">'HourlyDryBulbTemperature'</span>, <span class="st">'HourlyWetBulbTemperature'</span>, <span class="st">'HourlyRelativeHumidity'</span>, <span class="st">'HourlyDewPointTemperature'</span>, <span class="st">'HourlyPrecipitation'</span>, <span class="st">'HourlySeaLevelPressure'</span>, <span class="st">'HourlyStationPressure'</span>, <span class="st">'HourlyWindSpeed'</span>, <span class="st">'HourlyWindDirection'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-outputid="e912fd3d-4a57-4975-fa36-6393dfcdb31f" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337921911,&quot;user_tz&quot;:420,&quot;elapsed&quot;:18200,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to process each city's dataset</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> process_city_data(df, cols_convert, cols_impute, city_name):</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Convert columns to numeric, extracting the numeric part</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> cols_convert:</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> df[col].dtype <span class="op">==</span> <span class="st">'object'</span>:</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>            df[col] <span class="op">=</span> df[col].<span class="bu">str</span>.extract(<span class="st">'(\d+)'</span>, expand<span class="op">=</span><span class="va">False</span>).astype(<span class="bu">float</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check and print missing values before imputation</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> cols_impute:</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        missing_values <span class="op">=</span> df[col].isnull().<span class="bu">sum</span>()</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>city_name<span class="sc">}</span><span class="ss"> - Missing values in </span><span class="sc">{</span>col<span class="sc">}</span><span class="ss"> before imputation: </span><span class="sc">{</span>missing_values<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Initialize the KNN Imputer and apply KNN Imputation</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    imputer <span class="op">=</span> KNNImputer(n_neighbors<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    df[cols_impute] <span class="op">=</span> imputer.fit_transform(df[cols_impute])</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check and print missing values after imputation</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> col <span class="kw">in</span> cols_impute:</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        missing_values <span class="op">=</span> df[col].isnull().<span class="bu">sum</span>()</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>city_name<span class="sc">}</span><span class="ss"> - Missing values in </span><span class="sc">{</span>col<span class="sc">}</span><span class="ss"> after imputation: </span><span class="sc">{</span>missing_values<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Display the head and describe of the dataset</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>city_name<span class="sc">}</span><span class="ss"> Dataset - First 5 rows:"</span>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(df.head())</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="sc">{</span>city_name<span class="sc">}</span><span class="ss"> Dataset - Descriptive Statistics:"</span>)</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(df.describe())</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Process each dataset and assign it back to the variable</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>dallas <span class="op">=</span> process_city_data(dallas, cols_to_convert[<span class="st">'dallas'</span>], cols_to_impute, <span class="st">'Dallas'</span>)</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>arlington <span class="op">=</span> process_city_data(arlington, cols_to_convert[<span class="st">'arlington'</span>], cols_to_impute, <span class="st">'Arlington'</span>)</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>denton <span class="op">=</span> process_city_data(denton, cols_to_convert[<span class="st">'denton'</span>], cols_to_impute, <span class="st">'Denton'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dallas - Missing values in HourlyDryBulbTemperature before imputation: 384
Dallas - Missing values in HourlyWetBulbTemperature before imputation: 478
Dallas - Missing values in HourlyRelativeHumidity before imputation: 386
Dallas - Missing values in HourlyDewPointTemperature before imputation: 386
Dallas - Missing values in HourlyPrecipitation before imputation: 1884
Dallas - Missing values in HourlySeaLevelPressure before imputation: 1801
Dallas - Missing values in HourlyStationPressure before imputation: 476
Dallas - Missing values in HourlyWindSpeed before imputation: 388
Dallas - Missing values in HourlyWindDirection before imputation: 1090
Dallas - Missing values in HourlyDryBulbTemperature after imputation: 0
Dallas - Missing values in HourlyWetBulbTemperature after imputation: 0
Dallas - Missing values in HourlyRelativeHumidity after imputation: 0
Dallas - Missing values in HourlyDewPointTemperature after imputation: 0
Dallas - Missing values in HourlyPrecipitation after imputation: 0
Dallas - Missing values in HourlySeaLevelPressure after imputation: 0
Dallas - Missing values in HourlyStationPressure after imputation: 0
Dallas - Missing values in HourlyWindSpeed after imputation: 0
Dallas - Missing values in HourlyWindDirection after imputation: 0
Dallas Dataset - First 5 rows:
                 DATE  HourlyDryBulbTemperature  HourlyWetBulbTemperature  \
0 2022-01-01 00:53:00                      65.0                      64.0   
1 2022-01-01 01:53:00                      65.0                      64.0   
2 2022-01-01 02:53:00                      64.0                      63.0   
3 2022-01-01 03:53:00                      64.0                      62.0   
4 2022-01-01 04:53:00                      63.0                      61.0   

   HourlyDewPointTemperature  HourlyPrecipitation  HourlySeaLevelPressure  \
0                       63.0                  0.0                    29.0   
1                       63.0                  0.0                    29.0   
2                       63.0                  0.0                    29.0   
3                       61.0                  0.0                    29.0   
4                       59.0                  0.0                    29.0   

   HourlyStationPressure  HourlyRelativeHumidity  HourlyWindSpeed  \
0                   29.0                    93.0              9.0   
1                   29.0                    93.0              6.0   
2                   29.0                    96.0              0.0   
3                   29.0                    90.0              3.0   
4                   29.0                    87.0              5.0   

   HourlyWindDirection  
0                320.0  
1                360.0  
2                  0.0  
3                 80.0  
4                110.0  

Dallas Dataset - Descriptive Statistics:
       HourlyDryBulbTemperature  HourlyWetBulbTemperature  \
count              10536.000000              10536.000000   
mean                  67.197414                 58.333991   
std                   18.608601                 15.293785   
min                   11.000000                  8.000000   
25%                   55.000000                 48.000000   
50%                   68.000000                 61.000000   
75%                   81.000000                 72.000000   
max                  107.000000                 81.000000   

       HourlyDewPointTemperature  HourlyPrecipitation  HourlySeaLevelPressure  \
count               10536.000000         10536.000000            10536.000000   
mean                   51.414822             0.001489               29.453747   
std                    17.581486             0.033942                0.470971   
min                     0.000000             0.000000               29.000000   
25%                    38.000000             0.000000               29.000000   
50%                    56.000000             0.000000               29.200000   
75%                    66.000000             0.000000               30.000000   
max                    76.000000             1.000000               30.000000   

       HourlyStationPressure  HourlyRelativeHumidity  HourlyWindSpeed  \
count           10536.000000            10536.000000     10536.000000   
mean               29.009181               61.355909         8.742737   
std                 0.127099               21.295024         5.102282   
min                28.000000               12.000000         0.000000   
25%                29.000000               45.000000         6.000000   
50%                29.000000               61.352512         8.000000   
75%                29.000000               78.000000        11.000000   
max                30.000000              100.000000        36.000000   

       HourlyWindDirection  
count         10536.000000  
mean            164.009625  
std              97.066256  
min               0.000000  
25%             110.000000  
50%             160.000000  
75%             200.000000  
max             360.000000  
Arlington - Missing values in HourlyDryBulbTemperature before imputation: 398
Arlington - Missing values in HourlyWetBulbTemperature before imputation: 549
Arlington - Missing values in HourlyRelativeHumidity before imputation: 398
Arlington - Missing values in HourlyDewPointTemperature before imputation: 398
Arlington - Missing values in HourlyPrecipitation before imputation: 2410
Arlington - Missing values in HourlySeaLevelPressure before imputation: 2251
Arlington - Missing values in HourlyStationPressure before imputation: 529
Arlington - Missing values in HourlyWindSpeed before imputation: 482
Arlington - Missing values in HourlyWindDirection before imputation: 836
Arlington - Missing values in HourlyDryBulbTemperature after imputation: 0
Arlington - Missing values in HourlyWetBulbTemperature after imputation: 0
Arlington - Missing values in HourlyRelativeHumidity after imputation: 0
Arlington - Missing values in HourlyDewPointTemperature after imputation: 0
Arlington - Missing values in HourlyPrecipitation after imputation: 0
Arlington - Missing values in HourlySeaLevelPressure after imputation: 0
Arlington - Missing values in HourlyStationPressure after imputation: 0
Arlington - Missing values in HourlyWindSpeed after imputation: 0
Arlington - Missing values in HourlyWindDirection after imputation: 0
Arlington Dataset - First 5 rows:
                 DATE  HourlyDryBulbTemperature  HourlyWetBulbTemperature  \
0 2022-01-01 00:18:00                      67.0                      66.0   
1 2022-01-01 00:27:00                      67.0                      66.0   
2 2022-01-01 00:53:00                      66.0                      64.0   
3 2022-01-01 01:53:00                      65.0                      64.0   
4 2022-01-01 02:53:00                      65.0                      64.0   

   HourlyDewPointTemperature  HourlyPrecipitation  HourlySeaLevelPressure  \
0                       65.0                  0.0                    29.0   
1                       65.0                  0.0                    29.0   
2                       63.0                  0.0                    29.0   
3                       63.0                  0.0                    29.0   
4                       63.0                  0.0                    29.0   

   HourlyStationPressure  HourlyRelativeHumidity  HourlyWindSpeed  \
0                   28.0                    93.0              8.0   
1                   28.0                    93.0              8.0   
2                   28.0                    90.0              6.0   
3                   28.0                    93.0              3.0   
4                   28.0                    93.0              3.0   

   HourlyWindDirection  
0                290.0  
1                270.0  
2                310.0  
3                330.0  
4                310.0  

Arlington Dataset - Descriptive Statistics:
       HourlyDryBulbTemperature  HourlyWetBulbTemperature  \
count              10938.000000              10938.000000   
mean                  66.799237                 58.075903   
std                   18.621383                 15.162909   
min                   11.000000                  8.000000   
25%                   54.250000                 48.000000   
50%                   68.000000                 61.000000   
75%                   80.000000                 72.000000   
max                  108.000000                 79.000000   

       HourlyDewPointTemperature  HourlyPrecipitation  HourlySeaLevelPressure  \
count               10938.000000         10938.000000            10938.000000   
mean                   51.249222             0.001719               29.441497   
std                    17.430900             0.040534                0.465324   
min                     0.000000             0.000000               29.000000   
25%                    39.000000             0.000000               29.000000   
50%                    56.000000             0.000000               29.200000   
75%                    66.000000             0.000000               30.000000   
max                    77.000000             1.000000               30.000000   

       HourlyStationPressure  HourlyRelativeHumidity  HourlyWindSpeed  \
count           10938.000000            10938.000000     10938.000000   
mean               28.971671               62.252016         9.088201   
std                 0.170122               21.772457         5.689781   
min                28.000000                8.000000         0.000000   
25%                29.000000               46.000000         6.000000   
50%                29.000000               63.000000         9.000000   
75%                29.000000               81.000000        13.000000   
max                30.000000              100.000000        36.000000   

       HourlyWindDirection  
count         10938.000000  
mean            161.875966  
std             102.341655  
min               0.000000  
25%             110.000000  
50%             160.000000  
75%             200.000000  
max             360.000000  
Denton - Missing values in HourlyDryBulbTemperature before imputation: 385
Denton - Missing values in HourlyWetBulbTemperature before imputation: 516
Denton - Missing values in HourlyRelativeHumidity before imputation: 385
Denton - Missing values in HourlyDewPointTemperature before imputation: 383
Denton - Missing values in HourlyPrecipitation before imputation: 2059
Denton - Missing values in HourlySeaLevelPressure before imputation: 2058
Denton - Missing values in HourlyStationPressure before imputation: 508
Denton - Missing values in HourlyWindSpeed before imputation: 434
Denton - Missing values in HourlyWindDirection before imputation: 693
Denton - Missing values in HourlyDryBulbTemperature after imputation: 0
Denton - Missing values in HourlyWetBulbTemperature after imputation: 0
Denton - Missing values in HourlyRelativeHumidity after imputation: 0
Denton - Missing values in HourlyDewPointTemperature after imputation: 0
Denton - Missing values in HourlyPrecipitation after imputation: 0
Denton - Missing values in HourlySeaLevelPressure after imputation: 0
Denton - Missing values in HourlyStationPressure after imputation: 0
Denton - Missing values in HourlyWindSpeed after imputation: 0
Denton - Missing values in HourlyWindDirection after imputation: 0
Denton Dataset - First 5 rows:
                 DATE  HourlyDryBulbTemperature  HourlyWetBulbTemperature  \
0 2022-01-01 00:18:00                      63.0                      61.0   
1 2022-01-01 00:53:00                      62.0                      60.0   
2 2022-01-01 01:53:00                      62.0                      61.0   
3 2022-01-01 02:53:00                      61.0                      60.0   
4 2022-01-01 03:53:00                      61.0                      60.0   

   HourlyDewPointTemperature  HourlyPrecipitation  HourlySeaLevelPressure  \
0                       60.0                  0.0                  29.852   
1                       59.0                  0.0                  29.640   
2                       60.0                  0.0                  29.610   
3                       60.0                  0.0                  29.610   
4                       60.0                  0.0                  29.610   

   HourlyStationPressure  HourlyRelativeHumidity  HourlyWindSpeed  \
0                   28.0                    90.0              5.0   
1                   28.0                    90.0              0.0   
2                   28.0                    93.0              0.0   
3                   28.0                    97.0              0.0   
4                   28.0                    97.0              0.0   

   HourlyWindDirection  
0                350.0  
1                  0.0  
2                  0.0  
3                  0.0  
4                  0.0  

Denton Dataset - Descriptive Statistics:
       HourlyDryBulbTemperature  HourlyWetBulbTemperature  \
count              10808.000000              10808.000000   
mean                  65.053764                 56.960310   
std                   19.644345                 15.936749   
min                   10.000000                  7.000000   
25%                   52.000000                 46.000000   
50%                   66.000000                 60.000000   
75%                   80.000000                 71.000000   
max                  110.000000                 80.000000   

       HourlyDewPointTemperature  HourlyPrecipitation  HourlySeaLevelPressure  \
count               10808.000000         10808.000000            10808.000000   
mean                   50.681699             0.000230               30.005838   
std                    17.623262             0.013871                0.202828   
min                     0.000000             0.000000               29.370000   
25%                    37.000000             0.000000               29.880000   
50%                    55.000000             0.000000               29.980000   
75%                    66.000000             0.000000               30.110000   
max                    76.000000             1.000000               30.820000   

       HourlyStationPressure  HourlyRelativeHumidity  HourlyWindSpeed  \
count           10808.000000            10808.000000     10808.000000   
mean               28.967564               64.737678         9.472105   
std                 0.181262               22.355446         6.077904   
min                28.000000               12.000000         0.000000   
25%                29.000000               47.000000         6.000000   
50%                29.000000               65.000000         9.000000   
75%                29.000000               83.000000        14.000000   
max                30.000000              100.000000        37.000000   

       HourlyWindDirection  
count         10808.000000  
mean            164.818284  
std             107.662173  
min               0.000000  
25%             100.000000  
50%             160.000000  
75%             210.000000  
max             360.000000  </code></pre>
</div>
</div>
</section>
<section id="eda-exploratory-data-analysis" class="level1">
<h1><strong>4. EDA: Exploratory Data Analysis</strong></h1>
<p><strong>1. Summary Statistics:</strong></p>
<p>Lets Start by generating summary statistics for key variables like temperature, humidity, and wind speed. This will give a basic understanding of the data distribution in each city.</p>
<div class="cell" data-outputid="0ff11b68-2d75-4b6d-9e96-4f85da393cf6" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337924557,&quot;user_tz&quot;:420,&quot;elapsed&quot;:2648,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_time_features(df):</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'Hour'</span>] <span class="op">=</span> df[<span class="st">'DATE'</span>].dt.hour</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'Time'</span>] <span class="op">=</span> df[<span class="st">'DATE'</span>].dt.strftime(<span class="st">'%H:%M:%S'</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'Date'</span>] <span class="op">=</span> df[<span class="st">'DATE'</span>].dt.date</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'DayOfWeek'</span>] <span class="op">=</span> df[<span class="st">'DATE'</span>].dt.dayofweek</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'Month'</span>] <span class="op">=</span> df[<span class="st">'DATE'</span>].dt.month</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'Season'</span>] <span class="op">=</span> df[<span class="st">'Month'</span>].<span class="bu">apply</span>(<span class="kw">lambda</span> x: (x<span class="op">%</span><span class="dv">12</span> <span class="op">+</span> <span class="dv">3</span>)<span class="op">//</span><span class="dv">3</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    seasons <span class="op">=</span> {<span class="dv">1</span>: <span class="st">'Winter'</span>, <span class="dv">2</span>: <span class="st">'Spring'</span>, <span class="dv">3</span>: <span class="st">'Summer'</span>, <span class="dv">4</span>: <span class="st">'Fall'</span>}</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'Season'</span>] <span class="op">=</span> df[<span class="st">'Season'</span>].<span class="bu">map</span>(seasons)</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the time feature extraction to each dataset</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>extract_time_features(arlington)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>extract_time_features(dallas)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>extract_time_features(denton)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary statistics for key variables</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>summary_denton <span class="op">=</span> denton.describe()</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>summary_dallas <span class="op">=</span> dallas.describe()</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>summary_arlington <span class="op">=</span> arlington.describe()</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the summary statistics</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Summary Statistics for Denton:</span><span class="ch">\n</span><span class="st">"</span>, summary_denton)</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Summary Statistics for Dallas:</span><span class="ch">\n</span><span class="st">"</span>, summary_dallas)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Summary Statistics for Arlington:</span><span class="ch">\n</span><span class="st">"</span>, summary_arlington)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Summary Statistics for Denton:
        HourlyDryBulbTemperature  HourlyWetBulbTemperature  \
count              10808.000000              10808.000000   
mean                  65.053764                 56.960310   
std                   19.644345                 15.936749   
min                   10.000000                  7.000000   
25%                   52.000000                 46.000000   
50%                   66.000000                 60.000000   
75%                   80.000000                 71.000000   
max                  110.000000                 80.000000   

       HourlyDewPointTemperature  HourlyPrecipitation  HourlySeaLevelPressure  \
count               10808.000000         10808.000000            10808.000000   
mean                   50.681699             0.000230               30.005838   
std                    17.623262             0.013871                0.202828   
min                     0.000000             0.000000               29.370000   
25%                    37.000000             0.000000               29.880000   
50%                    55.000000             0.000000               29.980000   
75%                    66.000000             0.000000               30.110000   
max                    76.000000             1.000000               30.820000   

       HourlyStationPressure  HourlyRelativeHumidity  HourlyWindSpeed  \
count           10808.000000            10808.000000     10808.000000   
mean               28.967564               64.737678         9.472105   
std                 0.181262               22.355446         6.077904   
min                28.000000               12.000000         0.000000   
25%                29.000000               47.000000         6.000000   
50%                29.000000               65.000000         9.000000   
75%                29.000000               83.000000        14.000000   
max                30.000000              100.000000        37.000000   

       HourlyWindDirection          Hour     DayOfWeek         Month  
count         10808.000000  10808.000000  10808.000000  10808.000000  
mean            164.818284     11.736121      2.948557      6.641099  
std             107.662173      7.106309      2.008573      3.499618  
min               0.000000      0.000000      0.000000      1.000000  
25%             100.000000      6.000000      1.000000      4.000000  
50%             160.000000     12.000000      3.000000      7.000000  
75%             210.000000     18.000000      5.000000     10.000000  
max             360.000000     23.000000      6.000000     12.000000  

Summary Statistics for Dallas:
        HourlyDryBulbTemperature  HourlyWetBulbTemperature  \
count              10536.000000              10536.000000   
mean                  67.197414                 58.333991   
std                   18.608601                 15.293785   
min                   11.000000                  8.000000   
25%                   55.000000                 48.000000   
50%                   68.000000                 61.000000   
75%                   81.000000                 72.000000   
max                  107.000000                 81.000000   

       HourlyDewPointTemperature  HourlyPrecipitation  HourlySeaLevelPressure  \
count               10536.000000         10536.000000            10536.000000   
mean                   51.414822             0.001489               29.453747   
std                    17.581486             0.033942                0.470971   
min                     0.000000             0.000000               29.000000   
25%                    38.000000             0.000000               29.000000   
50%                    56.000000             0.000000               29.200000   
75%                    66.000000             0.000000               30.000000   
max                    76.000000             1.000000               30.000000   

       HourlyStationPressure  HourlyRelativeHumidity  HourlyWindSpeed  \
count           10536.000000            10536.000000     10536.000000   
mean               29.009181               61.355909         8.742737   
std                 0.127099               21.295024         5.102282   
min                28.000000               12.000000         0.000000   
25%                29.000000               45.000000         6.000000   
50%                29.000000               61.352512         8.000000   
75%                29.000000               78.000000        11.000000   
max                30.000000              100.000000        36.000000   

       HourlyWindDirection          Hour     DayOfWeek         Month  
count         10536.000000  10536.000000  10536.000000  10536.000000  
mean            164.009625     11.764996      2.964313      6.556758  
std              97.066256      7.086396      1.999397      3.491641  
min               0.000000      0.000000      0.000000      1.000000  
25%             110.000000      6.000000      1.000000      4.000000  
50%             160.000000     12.000000      3.000000      7.000000  
75%             200.000000     18.000000      5.000000     10.000000  
max             360.000000     23.000000      6.000000     12.000000  

Summary Statistics for Arlington:
        HourlyDryBulbTemperature  HourlyWetBulbTemperature  \
count              10938.000000              10938.000000   
mean                  66.799237                 58.075903   
std                   18.621383                 15.162909   
min                   11.000000                  8.000000   
25%                   54.250000                 48.000000   
50%                   68.000000                 61.000000   
75%                   80.000000                 72.000000   
max                  108.000000                 79.000000   

       HourlyDewPointTemperature  HourlyPrecipitation  HourlySeaLevelPressure  \
count               10938.000000         10938.000000            10938.000000   
mean                   51.249222             0.001719               29.441497   
std                    17.430900             0.040534                0.465324   
min                     0.000000             0.000000               29.000000   
25%                    39.000000             0.000000               29.000000   
50%                    56.000000             0.000000               29.200000   
75%                    66.000000             0.000000               30.000000   
max                    77.000000             1.000000               30.000000   

       HourlyStationPressure  HourlyRelativeHumidity  HourlyWindSpeed  \
count           10938.000000            10938.000000     10938.000000   
mean               28.971671               62.252016         9.088201   
std                 0.170122               21.772457         5.689781   
min                28.000000                8.000000         0.000000   
25%                29.000000               46.000000         6.000000   
50%                29.000000               63.000000         9.000000   
75%                29.000000               81.000000        13.000000   
max                30.000000              100.000000        36.000000   

       HourlyWindDirection          Hour     DayOfWeek         Month  
count         10938.000000  10938.000000  10938.000000  10938.000000  
mean            161.875966     11.714756      2.942037      6.617572  
std             102.341655      7.078796      2.001811      3.503695  
min               0.000000      0.000000      0.000000      1.000000  
25%             110.000000      6.000000      1.000000      4.000000  
50%             160.000000     11.000000      3.000000      7.000000  
75%             200.000000     18.000000      5.000000     10.000000  
max             360.000000     23.000000      6.000000     12.000000  </code></pre>
</div>
</div>
<p><strong>2. Box Plots:</strong></p>
<p>Generate box plots for key metrics across the three cities. This will help you understand the variability and presence of outliers in your data.</p>
<div class="cell" data-outputid="fa0ce67c-a70a-435c-d280-7efcf3aef867" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337930823,&quot;user_tz&quot;:420,&quot;elapsed&quot;:6269,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to plot data</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_data(data, city_name):</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">3</span>))</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(y<span class="op">=</span>data[<span class="st">'HourlyDryBulbTemperature'</span>], showfliers<span class="op">=</span><span class="va">True</span>, flierprops<span class="op">=</span><span class="bu">dict</span>(markerfacecolor<span class="op">=</span><span class="st">'r'</span>, marker<span class="op">=</span><span class="st">'o'</span>))</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'</span><span class="sc">{</span>city_name<span class="sc">}</span><span class="ss"> Temperature'</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(y<span class="op">=</span>data[<span class="st">'HourlyRelativeHumidity'</span>], showfliers<span class="op">=</span><span class="va">True</span>, flierprops<span class="op">=</span><span class="bu">dict</span>(markerfacecolor<span class="op">=</span><span class="st">'r'</span>, marker<span class="op">=</span><span class="st">'o'</span>))</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'</span><span class="sc">{</span>city_name<span class="sc">}</span><span class="ss"> Humidity'</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(y<span class="op">=</span>data[<span class="st">'HourlyWindSpeed'</span>], showfliers<span class="op">=</span><span class="va">True</span>, flierprops<span class="op">=</span><span class="bu">dict</span>(markerfacecolor<span class="op">=</span><span class="st">'r'</span>, marker<span class="op">=</span><span class="st">'o'</span>))</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'</span><span class="sc">{</span>city_name<span class="sc">}</span><span class="ss"> Wind Speed'</span>)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot for each city</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>plot_data(dallas, <span class="st">'Dallas'</span>)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>plot_data(arlington, <span class="st">'Arlington'</span>)</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>plot_data(denton, <span class="st">'Denton'</span>)</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-7-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-7-output-2.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-7-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337931027,&quot;user_tz&quot;:420,&quot;elapsed&quot;:209,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remove_outliers(df, column):</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    Q1 <span class="op">=</span> df[column].quantile(<span class="fl">0.25</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    Q3 <span class="op">=</span> df[column].quantile(<span class="fl">0.75</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    IQR <span class="op">=</span> Q3 <span class="op">-</span> Q1</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    lower_bound <span class="op">=</span> Q1 <span class="op">-</span> <span class="fl">1.5</span> <span class="op">*</span> IQR</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    upper_bound <span class="op">=</span> Q3 <span class="op">+</span> <span class="fl">1.5</span> <span class="op">*</span> IQR</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    df_filtered <span class="op">=</span> df[(df[column] <span class="op">&gt;=</span> lower_bound) <span class="op">&amp;</span> (df[column] <span class="op">&lt;=</span> upper_bound)]</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df_filtered</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming dallas_data, arlington_data, denton_data are your dataframes</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>dallas <span class="op">=</span> remove_outliers(dallas, <span class="st">'HourlyDryBulbTemperature'</span>)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>dallas <span class="op">=</span> remove_outliers(dallas, <span class="st">'HourlyWindSpeed'</span>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>arlington <span class="op">=</span> remove_outliers(arlington, <span class="st">'HourlyDryBulbTemperature'</span>)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>arlington <span class="op">=</span> remove_outliers(arlington, <span class="st">'HourlyWindSpeed'</span>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>denton <span class="op">=</span> remove_outliers(denton, <span class="st">'HourlyDryBulbTemperature'</span>)</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>denton <span class="op">=</span> remove_outliers(denton, <span class="st">'HourlyWindSpeed'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>BOXPLOTS AFTER CLEANING</strong></p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337938563,&quot;user_tz&quot;:420,&quot;elapsed&quot;:7540,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="ef285024-7efa-4437-b3c2-41553ac04e67" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to plot data</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_data(data, city_name):</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">3</span>))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">1</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(y<span class="op">=</span>data[<span class="st">'HourlyDryBulbTemperature'</span>], showfliers<span class="op">=</span><span class="va">True</span>, flierprops<span class="op">=</span><span class="bu">dict</span>(markerfacecolor<span class="op">=</span><span class="st">'r'</span>, marker<span class="op">=</span><span class="st">'o'</span>))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'</span><span class="sc">{</span>city_name<span class="sc">}</span><span class="ss"> Temperature'</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(y<span class="op">=</span>data[<span class="st">'HourlyRelativeHumidity'</span>], showfliers<span class="op">=</span><span class="va">True</span>, flierprops<span class="op">=</span><span class="bu">dict</span>(markerfacecolor<span class="op">=</span><span class="st">'r'</span>, marker<span class="op">=</span><span class="st">'o'</span>))</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'</span><span class="sc">{</span>city_name<span class="sc">}</span><span class="ss"> Humidity'</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    plt.subplot(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(y<span class="op">=</span>data[<span class="st">'HourlyWindSpeed'</span>], showfliers<span class="op">=</span><span class="va">True</span>, flierprops<span class="op">=</span><span class="bu">dict</span>(markerfacecolor<span class="op">=</span><span class="st">'r'</span>, marker<span class="op">=</span><span class="st">'o'</span>))</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    plt.title(<span class="ss">f'</span><span class="sc">{</span>city_name<span class="sc">}</span><span class="ss"> Wind Speed'</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    plt.show()</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot for each city</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>plot_data(dallas, <span class="st">'Dallas'</span>)</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>plot_data(arlington, <span class="st">'Arlington'</span>)</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>plot_data(denton, <span class="st">'Denton'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-9-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-9-output-2.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-9-output-3.png" class="img-fluid"></p>
</div>
</div>
<p><strong>3. Time Series Analysis:</strong></p>
<p>Plot time series graphs for key variables like temperature and humidity. This will help in understanding the temporal patterns and any noticeable trends over the year. We can look for seasonality or cyclic patterns, which are common in climatic data.</p>
<div class="cell" data-outputid="a22b5580-a08e-428f-c435-55b495ee1cc2" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337938564,&quot;user_tz&quot;:420,&quot;elapsed&quot;:6,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the column names in Denton dataset</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Denton Dataset Columns:"</span>, denton.columns)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the column names in Dallas dataset</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Dallas Dataset Columns:"</span>, dallas.columns)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the column names in Arlington dataset</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Arlington Dataset Columns:"</span>, arlington.columns)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Denton Dataset Columns: Index(['DATE', 'HourlyDryBulbTemperature', 'HourlyWetBulbTemperature',
       'HourlyDewPointTemperature', 'HourlyPrecipitation',
       'HourlySeaLevelPressure', 'HourlyStationPressure',
       'HourlyRelativeHumidity', 'HourlyWindSpeed', 'HourlyWindDirection',
       'Hour', 'Time', 'Date', 'DayOfWeek', 'Month', 'Season'],
      dtype='object')
Dallas Dataset Columns: Index(['DATE', 'HourlyDryBulbTemperature', 'HourlyWetBulbTemperature',
       'HourlyDewPointTemperature', 'HourlyPrecipitation',
       'HourlySeaLevelPressure', 'HourlyStationPressure',
       'HourlyRelativeHumidity', 'HourlyWindSpeed', 'HourlyWindDirection',
       'Hour', 'Time', 'Date', 'DayOfWeek', 'Month', 'Season'],
      dtype='object')
Arlington Dataset Columns: Index(['DATE', 'HourlyDryBulbTemperature', 'HourlyWetBulbTemperature',
       'HourlyDewPointTemperature', 'HourlyPrecipitation',
       'HourlySeaLevelPressure', 'HourlyStationPressure',
       'HourlyRelativeHumidity', 'HourlyWindSpeed', 'HourlyWindDirection',
       'Hour', 'Time', 'Date', 'DayOfWeek', 'Month', 'Season'],
      dtype='object')</code></pre>
</div>
</div>
<div class="cell" data-outputid="e425d05c-73e5-48c5-80de-325e7ede7b03" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337942770,&quot;user_tz&quot;:420,&quot;elapsed&quot;:4210,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="10">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the temperature time series</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a figure and a set of subplots</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="dv">3</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Dallas</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].plot(dallas[<span class="st">'DATE'</span>], dallas[<span class="st">'HourlyDryBulbTemperature'</span>], label<span class="op">=</span><span class="st">'Dallas'</span>, color<span class="op">=</span><span class="st">'green'</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'Annual Dallas Temperature Time Series'</span>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].set_ylabel(<span class="st">'Temperature (°F)'</span>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].legend()</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">1</span>].grid(<span class="va">True</span>)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Arlington</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].plot(arlington[<span class="st">'DATE'</span>], arlington[<span class="st">'HourlyDryBulbTemperature'</span>], label<span class="op">=</span><span class="st">'Arlington'</span>, color<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].set_title(<span class="st">'Annual Arlington Temperature Time Series'</span>)</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].set_ylabel(<span class="st">'Temperature (°F)'</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].legend()</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">2</span>].grid(<span class="va">True</span>)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot Denton</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].plot(denton[<span class="st">'DATE'</span>], denton[<span class="st">'HourlyDryBulbTemperature'</span>], label<span class="op">=</span><span class="st">'Denton'</span>, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'Annual Denton Temperature Time Series'</span>)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'Date'</span>)</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].set_ylabel(<span class="st">'Temperature (°F)'</span>)</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].legend()</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>axes[<span class="dv">0</span>].grid(<span class="va">True</span>)</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust the layout</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-11-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><strong>4. Histograms and Distributions:</strong></p>
<p>Create histograms for different climatic variables to understand their distribution. Compare the distributions of these variables across the three cities to spot any significant differences.</p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337945894,&quot;user_tz&quot;:420,&quot;elapsed&quot;:3132,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="6c786520-11bd-4814-ba7b-4fb2c0b15718" data-execution_count="11">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importing necessary library</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Define font sizes</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>title_fontsize <span class="op">=</span> <span class="dv">18</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>label_fontsize <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>ticks_fontsize <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram for Dallas</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>plt.hist(dallas[<span class="st">'HourlyDryBulbTemperature'</span>], bins<span class="op">=</span><span class="dv">20</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, color<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Dallas Temperature Histogram'</span>, fontsize<span class="op">=</span>title_fontsize)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Temperature (°F)'</span>, fontsize<span class="op">=</span>label_fontsize)</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span>label_fontsize)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>plt.xticks(fontsize<span class="op">=</span>ticks_fontsize)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>plt.yticks(fontsize<span class="op">=</span>ticks_fontsize)</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram for Arlington</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>plt.hist(arlington[<span class="st">'HourlyDryBulbTemperature'</span>], bins<span class="op">=</span><span class="dv">20</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, color<span class="op">=</span><span class="st">'green'</span>)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Arlington Temperature Histogram'</span>, fontsize<span class="op">=</span>title_fontsize)</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Temperature (°F)'</span>, fontsize<span class="op">=</span>label_fontsize)</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span>label_fontsize)</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>plt.xticks(fontsize<span class="op">=</span>ticks_fontsize)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>plt.yticks(fontsize<span class="op">=</span>ticks_fontsize)</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogram for Denton</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>plt.hist(denton[<span class="st">'HourlyDryBulbTemperature'</span>], bins<span class="op">=</span><span class="dv">20</span>, alpha<span class="op">=</span><span class="fl">0.5</span>, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Denton Temperature Histogram'</span>, fontsize<span class="op">=</span>title_fontsize)</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Temperature (°F)'</span>, fontsize<span class="op">=</span>label_fontsize)</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Frequency'</span>, fontsize<span class="op">=</span>label_fontsize)</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>plt.xticks(fontsize<span class="op">=</span>ticks_fontsize)</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>plt.yticks(fontsize<span class="op">=</span>ticks_fontsize)</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-12-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-12-output-2.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-12-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337945895,&quot;user_tz&quot;:420,&quot;elapsed&quot;:7,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="426b61fd-876d-4176-f97d-fbff63b6e7c2" data-execution_count="12">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>skewness_dallas <span class="op">=</span> dallas[<span class="st">'HourlyDryBulbTemperature'</span>].skew()</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>skewness_arlington <span class="op">=</span> arlington[<span class="st">'HourlyDryBulbTemperature'</span>].skew()</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>skewness_denton <span class="op">=</span> denton[<span class="st">'HourlyDryBulbTemperature'</span>].skew()</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(skewness_dallas)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(skewness_arlington)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(skewness_denton)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>-0.36469398943711373
-0.37543469534486196
-0.3439428246977408</code></pre>
</div>
</div>
<p><strong>5. Correlation Analysis:</strong></p>
<p>Conduct a correlation analysis to understand the relationships between different variables. Heatmaps can be particularly useful for visualizing correlation matrices.</p>
<p><strong>For Dallas:</strong></p>
<div class="cell" data-outputid="b5c8cb9e-3514-4448-eada-ac4e8e62189f" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337947137,&quot;user_tz&quot;:420,&quot;elapsed&quot;:1247,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="13">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>correlation_matrix_dallas <span class="op">=</span> dallas.corr()</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">131</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>plt.imshow(correlation_matrix_dallas, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, interpolation<span class="op">=</span><span class="st">'nearest'</span>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Correlation Heatmap - Dallas'</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>plt.xticks(<span class="bu">range</span>(<span class="bu">len</span>(correlation_matrix_dallas)), correlation_matrix_dallas.columns, rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>plt.yticks(<span class="bu">range</span>(<span class="bu">len</span>(correlation_matrix_dallas)), correlation_matrix_dallas.columns)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>FutureWarning: The default value of numeric_only in DataFrame.corr is deprecated. In a future version, it will default to False. Select only valid columns or specify the value of numeric_only to silence this warning.
  correlation_matrix_dallas = dallas.corr()</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-14-output-2.png" class="img-fluid"></p>
</div>
</div>
<p><strong>For Denton:</strong></p>
<div class="cell" data-outputid="7dc3591c-5288-4fa6-bf76-c8f1c32702cd" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337947955,&quot;user_tz&quot;:420,&quot;elapsed&quot;:822,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="14">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>correlation_matrix_denton <span class="op">=</span> denton.corr()</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">131</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>plt.imshow(correlation_matrix_denton, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, interpolation<span class="op">=</span><span class="st">'nearest'</span>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Correlation Heatmap - Denton'</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>plt.xticks(<span class="bu">range</span>(<span class="bu">len</span>(correlation_matrix_denton)), correlation_matrix_denton.columns, rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>plt.yticks(<span class="bu">range</span>(<span class="bu">len</span>(correlation_matrix_denton)), correlation_matrix_denton.columns)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>FutureWarning: The default value of numeric_only in DataFrame.corr is deprecated. In a future version, it will default to False. Select only valid columns or specify the value of numeric_only to silence this warning.
  correlation_matrix_denton = denton.corr()</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-15-output-2.png" class="img-fluid"></p>
</div>
</div>
<p><strong>For Arlington:</strong></p>
<div class="cell" data-outputid="7c1ab65f-c492-4503-dca4-7f29e7df0c4a" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337948786,&quot;user_tz&quot;:420,&quot;elapsed&quot;:835,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="15">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>correlation_matrix_arlington <span class="op">=</span> arlington.corr()</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>plt.subplot(<span class="dv">131</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>plt.imshow(correlation_matrix_arlington, cmap<span class="op">=</span><span class="st">'coolwarm'</span>, interpolation<span class="op">=</span><span class="st">'nearest'</span>)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Correlation Heatmap - Arlington'</span>)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>plt.xticks(<span class="bu">range</span>(<span class="bu">len</span>(correlation_matrix_arlington)), correlation_matrix_arlington.columns, rotation<span class="op">=</span><span class="dv">90</span>)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>plt.yticks(<span class="bu">range</span>(<span class="bu">len</span>(correlation_matrix_arlington)), correlation_matrix_arlington.columns)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>FutureWarning: The default value of numeric_only in DataFrame.corr is deprecated. In a future version, it will default to False. Select only valid columns or specify the value of numeric_only to silence this warning.
  correlation_matrix_arlington = arlington.corr()</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-16-output-2.png" class="img-fluid"></p>
</div>
</div>
<p><strong>6. Temperature difference based on different times of the day</strong></p>
<div class="cell" data-outputid="3eab4942-d787-4e76-f358-e8a94c471f5b" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337948787,&quot;user_tz&quot;:420,&quot;elapsed&quot;:11,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="16">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> categorize_day_night(hour):</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="dv">6</span> <span class="op">&lt;=</span> hour <span class="op">&lt;</span> <span class="dv">18</span>:</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Daytime'</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Nighttime'</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply this function to your datasets</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>arlington[<span class="st">'Day_Night'</span>] <span class="op">=</span> arlington[<span class="st">'Hour'</span>].<span class="bu">apply</span>(categorize_day_night)</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>dallas[<span class="st">'Day_Night'</span>] <span class="op">=</span> dallas[<span class="st">'Hour'</span>].<span class="bu">apply</span>(categorize_day_night)</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>denton[<span class="st">'Day_Night'</span>] <span class="op">=</span> denton[<span class="st">'Hour'</span>].<span class="bu">apply</span>(categorize_day_night)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate average temperatures</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>arlington_day_night_avg <span class="op">=</span> arlington.groupby(<span class="st">'Day_Night'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].mean()</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>dallas_day_night_avg <span class="op">=</span> dallas.groupby(<span class="st">'Day_Night'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].mean()</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>denton_day_night_avg <span class="op">=</span> denton.groupby(<span class="st">'Day_Night'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].mean()</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the average temperatures</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Arlington - Day vs Night Avg Temperature:</span><span class="ch">\n</span><span class="st">"</span>, arlington_day_night_avg)</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Dallas - Day vs Night Avg Temperature:</span><span class="ch">\n</span><span class="st">"</span>, dallas_day_night_avg)</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Denton - Day vs Night Avg Temperature:</span><span class="ch">\n</span><span class="st">"</span>, denton_day_night_avg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Arlington - Day vs Night Avg Temperature:
 Day_Night
Daytime      70.480574
Nighttime    63.592148
Name: HourlyDryBulbTemperature, dtype: float64
Dallas - Day vs Night Avg Temperature:
 Day_Night
Daytime      70.213849
Nighttime    65.082392
Name: HourlyDryBulbTemperature, dtype: float64
Denton - Day vs Night Avg Temperature:
 Day_Night
Daytime      69.247135
Nighttime    61.047231
Name: HourlyDryBulbTemperature, dtype: float64</code></pre>
</div>
</div>
<p><strong>Plot: Daytime vs Nighttime Average Temperatures Across Cities</strong></p>
<div class="cell" data-outputid="0f040b48-5b6d-439b-ecc9-89054927a41d" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337949535,&quot;user_tz&quot;:420,&quot;elapsed&quot;:555,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="17">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up for multiple bar plot</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>bar_width <span class="op">=</span> <span class="fl">0.2</span>  <span class="co"># width of the bars</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> np.arange(<span class="dv">3</span>)  <span class="co"># Three cities</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the plot</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">7</span>, <span class="dv">5</span>))</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>plt.bar(index, [dallas_day_night_avg[<span class="st">'Daytime'</span>], arlington_day_night_avg[<span class="st">'Daytime'</span>],denton_day_night_avg[<span class="st">'Daytime'</span>]],</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>        bar_width, color<span class="op">=</span><span class="st">'#EF810E'</span>, label<span class="op">=</span><span class="st">'Daytime'</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>plt.bar(index <span class="op">+</span> bar_width, [dallas_day_night_avg[<span class="st">'Nighttime'</span>],arlington_day_night_avg[<span class="st">'Nighttime'</span>],  denton_day_night_avg[<span class="st">'Nighttime'</span>]],</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>        bar_width, color<span class="op">=</span><span class="st">'#095D79'</span>, label<span class="op">=</span><span class="st">'Nighttime'</span>)</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Cities'</span>)</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Average Temperature (°F)'</span>)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Daytime vs Nighttime Average Temperatures Across Cities'</span>)</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>plt.xticks(index <span class="op">+</span> bar_width <span class="op">/</span> <span class="dv">2</span>, [<span class="st">'Dallas'</span>, <span class="st">'Arlington'</span>, <span class="st">'Denton'</span>])</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-18-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><strong>Key Takeaways:</strong></p>
<ul>
<li><p>The smaller difference in nighttime and daytime temperatures in Dallas aligns with a stronger UHI effect, where the urban environment retains more heat.</p></li>
<li><p>Arlington, while also urban, shows a slightly more significant temperature drop at night than Dallas, indicating a somewhat less intense UHI effect.</p></li>
<li><p>Denton’s larger temperature drop is consistent with rural areas that do not exhibit strong UHI effects.</p></li>
</ul>
<p><strong>7.Temporal Comparison:</strong></p>
<p>To compare the same time periods (like months or seasons) across the three cities, you can follow these steps:</p>
<div class="cell" data-outputid="e8e920c8-3890-44e6-e979-79ebe31232db" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337954717,&quot;user_tz&quot;:420,&quot;elapsed&quot;:5184,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="18">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">################################################################################################################################################</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># The plot for the night-time temperatures for Denton, Dallas, and Arlington across all four seasons: winter, spring, summer, and fall.**</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">################################################################################################################################################</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 'DATE' to datetime and extract hour for night-time analysis</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> df <span class="kw">in</span> [denton, dallas, arlington]:</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'DATE'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'DATE'</span>])</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'Hour'</span>] <span class="op">=</span> df[<span class="st">'DATE'</span>].dt.hour</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Define night-time hours (9 PM to 3 AM)</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>night_hours <span class="op">=</span> [<span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Define seasons</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>winter_months <span class="op">=</span> [<span class="dv">12</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>spring_months <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>summer_months <span class="op">=</span> [<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>fall_months <span class="op">=</span> [<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>]</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to calculate average night-time temperature</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_nighttime_avg(df, months):</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>    nighttime_data <span class="op">=</span> df[df[<span class="st">'DATE'</span>].dt.month.isin(months) <span class="op">&amp;</span> df[<span class="st">'Hour'</span>].isin(night_hours)]</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> nighttime_data[<span class="st">'HourlyDryBulbTemperature'</span>].mean()</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate average night-time temperatures for each city and season</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>nighttime_temps_seasons <span class="op">=</span> {}</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> season, months <span class="kw">in</span> <span class="bu">zip</span>([<span class="st">'Winter'</span>, <span class="st">'Spring'</span>, <span class="st">'Summer'</span>, <span class="st">'Fall'</span>], [winter_months, spring_months, summer_months, fall_months]):</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>    nighttime_temps_seasons[season] <span class="op">=</span> {</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Denton'</span>: calculate_nighttime_avg(denton, months),</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Dallas'</span>: calculate_nighttime_avg(dallas, months),</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">'Arlington'</span>: calculate_nighttime_avg(arlington, months)</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the results</span></span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a more visually appealing color palette</span></span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>colors <span class="op">=</span> sns.color_palette(<span class="st">'husl'</span>, <span class="dv">3</span>)</span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualize the results with values on each bar</span></span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>seasons <span class="op">=</span> [<span class="st">'Winter'</span>, <span class="st">'Spring'</span>, <span class="st">'Summer'</span>, <span class="st">'Fall'</span>]</span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>cities <span class="op">=</span> [<span class="st">'Dallas'</span>, <span class="st">'Arlington'</span>, <span class="st">'Denton'</span>]</span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">10</span>))</span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, season <span class="kw">in</span> <span class="bu">enumerate</span>(seasons):</span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>    avg_temps <span class="op">=</span> [nighttime_temps_seasons[season][city] <span class="cf">for</span> city <span class="kw">in</span> cities]</span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> plt.subplot(<span class="dv">2</span>, <span class="dv">2</span>, i<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-54"><a href="#cb27-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Creating bars with different colors</span></span>
<span id="cb27-55"><a href="#cb27-55" aria-hidden="true" tabindex="-1"></a>    bars <span class="op">=</span> ax.bar(cities, avg_temps, color<span class="op">=</span>colors)</span>
<span id="cb27-56"><a href="#cb27-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-57"><a href="#cb27-57" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Annotate each bar with the value</span></span>
<span id="cb27-58"><a href="#cb27-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> bar <span class="kw">in</span> bars:</span>
<span id="cb27-59"><a href="#cb27-59" aria-hidden="true" tabindex="-1"></a>        yval <span class="op">=</span> bar.get_height()</span>
<span id="cb27-60"><a href="#cb27-60" aria-hidden="true" tabindex="-1"></a>        ax.text(bar.get_x() <span class="op">+</span> bar.get_width()<span class="op">/</span><span class="dv">2</span>, yval, <span class="bu">round</span>(yval, <span class="dv">2</span>),</span>
<span id="cb27-61"><a href="#cb27-61" aria-hidden="true" tabindex="-1"></a>                ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>, fontsize<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb27-62"><a href="#cb27-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-63"><a href="#cb27-63" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Enhancing the subplot</span></span>
<span id="cb27-64"><a href="#cb27-64" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="ss">f'</span><span class="sc">{</span>season<span class="sc">}</span><span class="ss"> Night-Time Temperatures'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb27-65"><a href="#cb27-65" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(<span class="st">'Cities'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb27-66"><a href="#cb27-66" aria-hidden="true" tabindex="-1"></a>    ax.set_ylabel(<span class="st">'Temperature (°F)'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb27-67"><a href="#cb27-67" aria-hidden="true" tabindex="-1"></a>    ax.set_ylim(<span class="bu">min</span>(avg_temps) <span class="op">-</span> <span class="dv">5</span>, <span class="bu">max</span>(avg_temps) <span class="op">+</span> <span class="dv">5</span>)  <span class="co"># Adjust y-axis</span></span>
<span id="cb27-68"><a href="#cb27-68" aria-hidden="true" tabindex="-1"></a>    ax.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)  <span class="co"># Adding grid lines</span></span>
<span id="cb27-69"><a href="#cb27-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-70"><a href="#cb27-70" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">'Comparative Night-Time Temperatures in Different Seasons'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb27-71"><a href="#cb27-71" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb27-72"><a href="#cb27-72" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-19-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-outputid="6478a9b0-242c-4139-ab94-7b966fd07214" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337955095,&quot;user_tz&quot;:420,&quot;elapsed&quot;:382,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="19">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">########################################################################</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Begin Plot for "Region Comparison - Monthly Avg Drop in Temp at Night"</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">########################################################################</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove midnight "23:59:00" and only look at "nighttime" values for all 3 regions</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>plot_arlington <span class="op">=</span> arlington[(arlington[<span class="st">'Time'</span>] <span class="op">!=</span> <span class="st">'23:59:00'</span>) <span class="op">&amp;</span> (arlington[<span class="st">'Day_Night'</span>] <span class="op">==</span> <span class="st">'Nighttime'</span>)].copy()</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>plot_dallas <span class="op">=</span> dallas[(dallas[<span class="st">'Time'</span>] <span class="op">!=</span> <span class="st">'23:59:00'</span>) <span class="op">&amp;</span> (dallas[<span class="st">'Day_Night'</span>] <span class="op">==</span> <span class="st">'Nighttime'</span>)].copy()</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>plot_denton <span class="op">=</span> denton[(denton[<span class="st">'Time'</span>] <span class="op">!=</span> <span class="st">'23:59:00'</span>) <span class="op">&amp;</span> (denton[<span class="st">'Day_Night'</span>] <span class="op">==</span> <span class="st">'Nighttime'</span>)].copy()</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate "nightly rate of change" (high vs. low temps) for Arlington</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>plot_arlington[<span class="st">'low'</span>] <span class="op">=</span> plot_arlington.groupby(<span class="st">'Date'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].transform(<span class="st">'min'</span>)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>plot_arlington[<span class="st">'high'</span>] <span class="op">=</span> plot_arlington.groupby(<span class="st">'Date'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].transform(<span class="st">'max'</span>)</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>plot_arlington[<span class="st">'rate_of_change'</span>] <span class="op">=</span> (plot_arlington[<span class="st">'high'</span>] <span class="op">-</span> plot_arlington[<span class="st">'low'</span>]) <span class="op">/</span> plot_arlington[<span class="st">'low'</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate "average monthly temperature rate of change" for Arlington</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_date <span class="op">=</span> plot_arlington.groupby(<span class="st">'Date'</span>)[<span class="st">'rate_of_change'</span>].mean().reset_index()</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_date[<span class="st">'Date'</span>] <span class="op">=</span> pd.to_datetime(avg_rate_of_change_by_date[<span class="st">'Date'</span>])</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_date[<span class="st">'Month'</span>] <span class="op">=</span> avg_rate_of_change_by_date[<span class="st">'Date'</span>].dt.month</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_month_arlington <span class="op">=</span> avg_rate_of_change_by_date.groupby(<span class="st">'Month'</span>)[<span class="st">'rate_of_change'</span>].mean().reset_index()</span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate "nightly rate of change" (high vs. low temps) for Dallas</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>plot_dallas[<span class="st">'low'</span>] <span class="op">=</span> plot_dallas.groupby(<span class="st">'Date'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].transform(<span class="st">'min'</span>)</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>plot_dallas[<span class="st">'high'</span>] <span class="op">=</span> plot_dallas.groupby(<span class="st">'Date'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].transform(<span class="st">'max'</span>)</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>plot_dallas[<span class="st">'rate_of_change'</span>] <span class="op">=</span> (plot_dallas[<span class="st">'high'</span>] <span class="op">-</span> plot_dallas[<span class="st">'low'</span>]) <span class="op">/</span> plot_dallas[<span class="st">'low'</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate "average monthly temperature rate of change" for Dallas</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_date <span class="op">=</span> plot_dallas.groupby(<span class="st">'Date'</span>)[<span class="st">'rate_of_change'</span>].mean().reset_index()</span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_date[<span class="st">'Date'</span>] <span class="op">=</span> pd.to_datetime(avg_rate_of_change_by_date[<span class="st">'Date'</span>])</span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_date[<span class="st">'Month'</span>] <span class="op">=</span> avg_rate_of_change_by_date[<span class="st">'Date'</span>].dt.month</span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_month_dallas <span class="op">=</span> avg_rate_of_change_by_date.groupby(<span class="st">'Month'</span>)[<span class="st">'rate_of_change'</span>].mean().reset_index()</span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate "nightly rate of change" (high vs. low temps) for Denton</span></span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>plot_denton[<span class="st">'low'</span>] <span class="op">=</span> plot_denton.groupby(<span class="st">'Date'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].transform(<span class="st">'min'</span>)</span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>plot_denton[<span class="st">'high'</span>] <span class="op">=</span> plot_denton.groupby(<span class="st">'Date'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].transform(<span class="st">'max'</span>)</span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>plot_denton[<span class="st">'rate_of_change'</span>] <span class="op">=</span> (plot_denton[<span class="st">'high'</span>] <span class="op">-</span> plot_denton[<span class="st">'low'</span>]) <span class="op">/</span> plot_denton[<span class="st">'low'</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate "nightly rate of change" (high vs. low temps) for Denton</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_date <span class="op">=</span> plot_denton.groupby(<span class="st">'Date'</span>)[<span class="st">'rate_of_change'</span>].mean().reset_index()</span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_date[<span class="st">'Date'</span>] <span class="op">=</span> pd.to_datetime(avg_rate_of_change_by_date[<span class="st">'Date'</span>])</span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_date[<span class="st">'Month'</span>] <span class="op">=</span> avg_rate_of_change_by_date[<span class="st">'Date'</span>].dt.month</span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a>avg_rate_of_change_by_month_denton <span class="op">=</span> avg_rate_of_change_by_date.groupby(<span class="st">'Month'</span>)[<span class="st">'rate_of_change'</span>].mean().reset_index()</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>plt.plot(avg_rate_of_change_by_month_arlington[<span class="st">'Month'</span>], avg_rate_of_change_by_month_arlington[<span class="st">'rate_of_change'</span>], label<span class="op">=</span><span class="st">'Arlington'</span>, marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a>plt.plot(avg_rate_of_change_by_month_dallas[<span class="st">'Month'</span>], avg_rate_of_change_by_month_dallas[<span class="st">'rate_of_change'</span>], label<span class="op">=</span><span class="st">'Dallas'</span>, marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>plt.plot(avg_rate_of_change_by_month_denton[<span class="st">'Month'</span>], avg_rate_of_change_by_month_denton[<span class="st">'rate_of_change'</span>], label<span class="op">=</span><span class="st">'Denton'</span>, marker<span class="op">=</span><span class="st">'o'</span>)</span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Change x-axis from "numbers of months" to "names of months"</span></span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> [<span class="st">'Jan'</span>, <span class="st">'Feb'</span>, <span class="st">'March'</span>, <span class="st">'April'</span>, <span class="st">'May'</span>, <span class="st">'June'</span>, <span class="st">'July'</span>, <span class="st">'Aug'</span>, <span class="st">'Sept'</span>, <span class="st">'Oct'</span>, <span class="st">'Nov'</span>, <span class="st">'Dec'</span>]</span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a>plt.xticks(avg_rate_of_change_by_month_arlington[<span class="st">'Month'</span>], months)</span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a>plt.gca().yaxis.set_major_formatter(mtick.PercentFormatter())</span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Labels for plot</span></span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'2022'</span>)</span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Avg Nightly Drop in Temp'</span>)</span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Region Comparison - Monthly Avg Drop in Temp at Night'</span>)</span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">False</span>)</span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-20-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><strong>Seasonal Variation of Relative Humidity in Different Cities</strong></p>
<div class="cell" data-outputid="dc42f090-a0d2-46ad-ace1-fe098cf131c1" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337956978,&quot;user_tz&quot;:420,&quot;elapsed&quot;:1893,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="20">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>custom_palette <span class="op">=</span> sns.color_palette(<span class="st">"Set2"</span>, n_colors<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the plot</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting with a line style and markers</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>pd.to_datetime(arlington[<span class="st">'DATE'</span>]).dt.month, y<span class="op">=</span>arlington[<span class="st">'HourlyRelativeHumidity'</span>], label<span class="op">=</span><span class="st">'Arlington'</span>, color<span class="op">=</span>custom_palette[<span class="dv">0</span>], linestyle<span class="op">=</span><span class="st">'-'</span>, marker<span class="op">=</span><span class="st">'o'</span>, markersize<span class="op">=</span><span class="dv">8</span>)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>pd.to_datetime(dallas[<span class="st">'DATE'</span>]).dt.month, y<span class="op">=</span>dallas[<span class="st">'HourlyRelativeHumidity'</span>], label<span class="op">=</span><span class="st">'Dallas'</span>, color<span class="op">=</span>custom_palette[<span class="dv">1</span>], linestyle<span class="op">=</span><span class="st">'-'</span>, marker<span class="op">=</span><span class="st">'s'</span>, markersize<span class="op">=</span><span class="dv">8</span>)</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>sns.lineplot(x<span class="op">=</span>pd.to_datetime(denton[<span class="st">'DATE'</span>]).dt.month, y<span class="op">=</span>denton[<span class="st">'HourlyRelativeHumidity'</span>], label<span class="op">=</span><span class="st">'Denton'</span>, color<span class="op">=</span>custom_palette[<span class="dv">2</span>], linestyle<span class="op">=</span><span class="st">'-'</span>, marker<span class="op">=</span><span class="st">'^'</span>, markersize<span class="op">=</span><span class="dv">8</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the title and labels</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Seasonal Variation of Relative Humidity in Different Cities'</span>, fontsize<span class="op">=</span><span class="dv">18</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, color<span class="op">=</span><span class="st">'darkblue'</span>)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Month'</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, color<span class="op">=</span><span class="st">'darkgreen'</span>)</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Relative Humidity (%)'</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>, color<span class="op">=</span><span class="st">'darkred'</span>)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize the legend</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Cities'</span>, title_fontsize<span class="op">=</span><span class="st">'14'</span>)</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Enhance grid lines</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, alpha<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Add background colors to highlight seasons with different colors</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>seasons <span class="op">=</span> [(<span class="dv">1</span>, <span class="st">'Winter'</span>, <span class="st">'lightblue'</span>), (<span class="dv">4</span>, <span class="st">'Spring'</span>, <span class="st">'lightgreen'</span>), (<span class="dv">7</span>, <span class="st">'Summer'</span>, <span class="st">'lightcoral'</span>), (<span class="dv">10</span>, <span class="st">'Fall'</span>, <span class="st">'khaki'</span>)]</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> month, season_name, color <span class="kw">in</span> seasons:</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    plt.axvspan(month <span class="op">-</span> <span class="dv">1</span>, month <span class="op">+</span> <span class="dv">2</span>, alpha<span class="op">=</span><span class="fl">0.2</span>, color<span class="op">=</span>color, label<span class="op">=</span>season_name)</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>    plt.text(month <span class="op">+</span> <span class="dv">1</span>, plt.ylim()[<span class="dv">1</span>] <span class="op">*</span> <span class="fl">0.95</span>, season_name, fontsize<span class="op">=</span><span class="dv">12</span>, ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'center'</span>, color<span class="op">=</span><span class="st">'black'</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-21-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>#<strong>5. Feature Engineering:</strong></p>
<div class="cell" data-outputid="b3c86a06-f5ae-4148-d0d8-7b5d7dab8ecd" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337956978,&quot;user_tz&quot;:420,&quot;elapsed&quot;:11,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="21">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate statistics for each season for DALLAS</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>seasonal_dallas <span class="op">=</span> dallas.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].describe()</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>seasonal_dallas</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate statistics for each season for ARLINGTON</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>seasonal_arlington <span class="op">=</span> arlington.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].describe()</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>seasonal_arlington</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate statistics for each season for DENTON</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>seasonal_denton <span class="op">=</span> denton.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].describe()</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>seasonal_denton</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the 25th, 50th, and 75th quartiles for each season for Dallas</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>dallas_temp <span class="op">=</span> dallas.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].quantile([<span class="fl">0.75</span>, <span class="fl">0.50</span>, <span class="fl">0.25</span>]).unstack()</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>dallas_humidity <span class="op">=</span> dallas.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyRelativeHumidity'</span>].quantile([<span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>]).unstack()</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>dallas_wind_speed <span class="op">=</span> dallas.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyWindSpeed'</span>].quantile([<span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>]).unstack()</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the thresholds</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dallas_temp)</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dallas_humidity)</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dallas_wind_speed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        0.25  0.50  0.75
Season                  
Fall    56.0  69.0  78.0
Spring  61.0  69.0  77.0
Summer  80.0  86.0  94.0
Winter  37.0  50.0  61.0
        0.25  0.50  0.75
Season                  
Fall    47.0  63.0  83.0
Spring  48.0  64.0  78.0
Summer  40.0  55.0  67.0
Winter  44.0  63.0  84.0
        0.25  0.50  0.75
Season                  
Fall     5.0   7.0   9.0
Spring   7.0  10.0  14.0
Summer   6.0   8.0  10.0
Winter   5.0   8.0  10.0</code></pre>
</div>
</div>
<div class="cell" data-outputid="658d64d1-2990-4102-e6b5-700bb012a0fa" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337956978,&quot;user_tz&quot;:420,&quot;elapsed&quot;:9,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="22">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the 25th, 50th, and 75th quartiles for each season for Arlington</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>ar_temp <span class="op">=</span> arlington.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].quantile([<span class="fl">0.75</span>, <span class="fl">0.50</span>, <span class="fl">0.25</span>]).unstack()</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>ar_humidity <span class="op">=</span> arlington.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyRelativeHumidity'</span>].quantile([<span class="fl">0.75</span>, <span class="fl">0.50</span>, <span class="fl">0.25</span>]).unstack()</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>ar_wind_speed <span class="op">=</span> arlington.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyWindSpeed'</span>].quantile([<span class="fl">0.75</span>, <span class="fl">0.50</span>, <span class="fl">0.25</span>]).unstack()</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the thresholds</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ar_temp)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ar_humidity)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ar_wind_speed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        0.25       0.50  0.75
Season                       
Fall    55.0  66.779507  76.0
Spring  61.0  70.000000  77.0
Summer  79.0  85.000000  93.0
Winter  36.0  50.000000  62.0
         0.25  0.50  0.75
Season                   
Fall    50.00  70.0  86.0
Spring  48.00  64.0  79.0
Summer  40.00  56.5  71.0
Winter  46.75  67.0  85.0
        0.25  0.50  0.75
Season                  
Fall     3.0   7.0  10.0
Spring   7.0  11.0  16.0
Summer   6.0   8.0  10.6
Winter   5.0   8.0  13.0</code></pre>
</div>
</div>
<div class="cell" data-outputid="faff4405-62f2-4c7a-bb06-fe05a47af212" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337956978,&quot;user_tz&quot;:420,&quot;elapsed&quot;:6,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="23">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the 25th, 50th, and 75th quartiles for each season for Denton</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>denton_temp <span class="op">=</span> denton.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyDryBulbTemperature'</span>].quantile([<span class="fl">0.75</span>, <span class="fl">0.50</span>, <span class="fl">0.25</span>]).unstack()</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>denton_humidity <span class="op">=</span> denton.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyRelativeHumidity'</span>].quantile([<span class="fl">0.75</span>, <span class="fl">0.50</span>, <span class="fl">0.25</span>]).unstack()</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>denton_wind_speed <span class="op">=</span> denton.groupby(<span class="st">'Season'</span>)[<span class="st">'HourlyWindSpeed'</span>].quantile([<span class="fl">0.75</span>, <span class="fl">0.50</span>, <span class="fl">0.25</span>]).unstack()</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the thresholds</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(denton_temp)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(denton_humidity)</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(denton_wind_speed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        0.25       0.50  0.75
Season                       
Fall    53.0  65.041063  75.0
Spring  58.0  67.000000  76.0
Summer  78.0  85.000000  93.0
Winter  32.0  47.000000  58.0
         0.25  0.50  0.75
Season                   
Fall    51.00  72.0  90.0
Spring  50.25  67.0  81.0
Summer  41.00  58.0  74.0
Winter  50.00  70.0  86.0
        0.25  0.50  0.75
Season                  
Fall     5.0   8.0  10.0
Spring   7.0  11.0  17.0
Summer   6.0   8.0  11.0
Winter   5.0   8.0  13.0</code></pre>
</div>
</div>
<p><strong>UHI Intensity calculation</strong></p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337956979,&quot;user_tz&quot;:420,&quot;elapsed&quot;:5,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="24">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> classify_uhi(row, temp_thresholds, humidity_thresholds, wind_speed_thresholds):</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    season <span class="op">=</span> row[<span class="st">'Season'</span>]</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> row[<span class="st">'HourlyDryBulbTemperature'</span>]</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    humidity <span class="op">=</span> row[<span class="st">'HourlyRelativeHumidity'</span>]</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    wind_speed <span class="op">=</span> row[<span class="st">'HourlyWindSpeed'</span>]</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get the thresholds for the current season</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    temp_high <span class="op">=</span> temp_thresholds.loc[season, <span class="fl">0.50</span>] <span class="co"># previous threshold --&gt; temp_high = temp_thresholds.loc[season, 0.75]</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    temp_medium <span class="op">=</span> temp_thresholds.loc[season, <span class="fl">0.25</span>] <span class="co"># previous threshold --&gt; temp_medium = temp_thresholds.loc[season, 0.50]</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    humidity_low <span class="op">=</span> humidity_thresholds.loc[season, <span class="fl">0.25</span>]</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    wind_speed_low <span class="op">=</span> wind_speed_thresholds.loc[season, <span class="fl">0.25</span>]</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Classify based on combined criteria</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> temp <span class="op">&gt;</span> temp_high <span class="kw">and</span> humidity <span class="op">&lt;</span> humidity_low <span class="kw">and</span> wind_speed <span class="op">&lt;</span> wind_speed_low:</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'High'</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> temp <span class="op">&gt;</span> temp_medium:</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Medium'</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">'Low'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-outputid="5e77374b-ea16-4060-a7b2-24d2edc4629e" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337958805,&quot;user_tz&quot;:420,&quot;elapsed&quot;:1830,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="25">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>dallas[<span class="st">'UHI Intensity'</span>] <span class="op">=</span> dallas.<span class="bu">apply</span>(<span class="kw">lambda</span> row: classify_uhi(row, dallas_temp, dallas_humidity, dallas_wind_speed), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>arlington[<span class="st">'UHI Intensity'</span>] <span class="op">=</span> arlington.<span class="bu">apply</span>(<span class="kw">lambda</span> row: classify_uhi(row, ar_temp, ar_humidity, ar_wind_speed), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>denton[<span class="st">'UHI Intensity'</span>] <span class="op">=</span> denton.<span class="bu">apply</span>(<span class="kw">lambda</span> row: classify_uhi(row, denton_temp, denton_humidity, denton_wind_speed), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co"># for Dallas</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'UHI Intensity for Dallas:'</span>, dallas[<span class="st">'UHI Intensity'</span>].value_counts())</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="co"># for Arlington</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'UHI Intensity for Arlington:'</span>, arlington[<span class="st">'UHI Intensity'</span>].value_counts())</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a><span class="co"># for Denton</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'UHI Intensity for Denton:'</span>,denton[<span class="st">'UHI Intensity'</span>].value_counts())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>UHI Intensity for Dallas: Medium    7271
Low       2626
High       245
Name: UHI Intensity, dtype: int64
UHI Intensity for Arlington: Medium    7846
Low       2804
High       155
Name: UHI Intensity, dtype: int64
UHI Intensity for Denton: Medium    7718
Low       2843
High       190
Name: UHI Intensity, dtype: int64</code></pre>
</div>
</div>
<p><strong>HIGH UHI Intensity city—DALLAS</strong></p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337959002,&quot;user_tz&quot;:420,&quot;elapsed&quot;:200,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="0dfd4196-0adb-4616-f535-f2f018237ef0" data-execution_count="26">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample data to mimic the UHI Intensity count output</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This would normally come from the 'value_counts()' of the actual dataframe</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>uhi_intensity_counts <span class="op">=</span> {</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'City'</span>: [<span class="st">'Dallas'</span>,<span class="st">'Denton'</span> ,<span class="st">'Arlington'</span>],</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'High'</span>: [<span class="dv">245</span>, <span class="dv">190</span>, <span class="dv">155</span>],  <span class="co"># Example counts of High UHI Intensity</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#'Medium': [7271, 7718, 7846],</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#'Low': [2626, 2843, 2804]</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a DataFrame from the sample data</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>df_uhi <span class="op">=</span> pd.DataFrame(uhi_intensity_counts)</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Melting the DataFrame to have 'Intensity' and 'Count' as separate columns</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>df_uhi_melted <span class="op">=</span> df_uhi.melt(id_vars<span class="op">=</span><span class="st">'City'</span>, var_name<span class="op">=</span><span class="st">'Intensity'</span>, value_name<span class="op">=</span><span class="st">'Count'</span>)</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering for 'High' Intensity only to show the comparison</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>df_high_intensity <span class="op">=</span> df_uhi_melted[df_uhi_melted[<span class="st">'Intensity'</span>] <span class="op">==</span> <span class="st">'High'</span>]</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the 'High' UHI Intensity counts for each city</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>barplot <span class="op">=</span> plt.bar(df_high_intensity[<span class="st">'City'</span>], df_high_intensity[<span class="st">'Count'</span>], color<span class="op">=</span>[<span class="st">'blue'</span>, <span class="st">'green'</span>, <span class="st">'orange'</span>])</span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">' HIGH UHI Intensity City---DALLAS'</span>)</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'City'</span>)</span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Counts of UHI Intensity'</span>)</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Highlight Dallas with a different color</span></span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>barplot[<span class="dv">0</span>].set_color(<span class="st">'Red'</span>)  <span class="co"># Assuming Dallas is the first bar</span></span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Annotate values on top of bars</span></span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> bar <span class="kw">in</span> barplot:</span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>    yval <span class="op">=</span> bar.get_height()</span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a>    plt.text(bar.get_x() <span class="op">+</span> bar.get_width()<span class="op">/</span><span class="dv">2</span>, yval, <span class="bu">int</span>(yval), ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>)</span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-27-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><strong>MEDIUM UHI Intensity City—ARLINGTON</strong></p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337959251,&quot;user_tz&quot;:420,&quot;elapsed&quot;:253,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="ed644535-bb57-444e-d7e0-d85939043fd5" data-execution_count="27">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample data to mimic the UHI Intensity count output</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This would normally come from the 'value_counts()' of the actual dataframe</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>uhi_intensity_counts <span class="op">=</span> {</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'City'</span>: [<span class="st">'Arlington'</span>,<span class="st">'Denton'</span>,<span class="st">'Dallas'</span>],</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#'High': [245, 190, 155],  # Example counts of High UHI Intensity</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Medium'</span>: [<span class="dv">7846</span>,<span class="dv">7718</span>,<span class="dv">7271</span>],</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">#'Low': [2626, 2843, 2804]</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a DataFrame from the sample data</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>df_uhi <span class="op">=</span> pd.DataFrame(uhi_intensity_counts)</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Melting the DataFrame to have 'Intensity' and 'Count' as separate columns</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>df_uhi_melted <span class="op">=</span> df_uhi.melt(id_vars<span class="op">=</span><span class="st">'City'</span>, var_name<span class="op">=</span><span class="st">'Intensity'</span>, value_name<span class="op">=</span><span class="st">'Count'</span>)</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering for 'Medium' Intensity only to show the comparison</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>df_medium_intensity <span class="op">=</span> df_uhi_melted[df_uhi_melted[<span class="st">'Intensity'</span>] <span class="op">==</span> <span class="st">'Medium'</span>]</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the 'Medium' UHI Intensity counts for each city</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>barplot <span class="op">=</span> plt.bar(df_medium_intensity[<span class="st">'City'</span>], df_medium_intensity[<span class="st">'Count'</span>], color<span class="op">=</span>[<span class="st">'blue'</span>, <span class="st">'green'</span>, <span class="st">'red'</span>])</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">' MEDIUM UHI Intensity City--ARLINGTON'</span>)</span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'City'</span>)</span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Counts of UHI Intensity'</span>)</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Highlight Arlington with a different color</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a>barplot[<span class="dv">0</span>].set_color(<span class="st">'orange'</span>)</span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Annotate values on top of bars</span></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> bar <span class="kw">in</span> barplot:</span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>    yval <span class="op">=</span> bar.get_height()</span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a>    plt.text(bar.get_x() <span class="op">+</span> bar.get_width()<span class="op">/</span><span class="dv">2</span>, yval, <span class="bu">int</span>(yval), ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>)</span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-28-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><strong>LOW UHI Intensity by City—DENTON</strong></p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337959445,&quot;user_tz&quot;:420,&quot;elapsed&quot;:198,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="12a9f3c9-c108-4cd2-9c5a-736fc9dd28e1" data-execution_count="28">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Sample data to mimic the UHI Intensity count output</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># This would normally come from the 'value_counts()' of the actual dataframe</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>uhi_intensity_counts <span class="op">=</span> {</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'City'</span>: [<span class="st">'Denton'</span>,<span class="st">'Arlington'</span>,<span class="st">'Dallas'</span>],</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#'High': [245, 190, 155],</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#'Medium': [7846,7718,7271],</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Low'</span>: [<span class="dv">2843</span>, <span class="dv">2804</span>, <span class="dv">2626</span>]</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a DataFrame from the sample data</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>df_uhi <span class="op">=</span> pd.DataFrame(uhi_intensity_counts)</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Melting the DataFrame to have 'Intensity' and 'Count' as separate columns</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>df_uhi_melted <span class="op">=</span> df_uhi.melt(id_vars<span class="op">=</span><span class="st">'City'</span>, var_name<span class="op">=</span><span class="st">'Intensity'</span>, value_name<span class="op">=</span><span class="st">'Count'</span>)</span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering for 'Low' Intensity only to show the comparison</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>df_low_intensity <span class="op">=</span> df_uhi_melted[df_uhi_melted[<span class="st">'Intensity'</span>] <span class="op">==</span> <span class="st">'Low'</span>]</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the 'Low' UHI Intensity counts for each city</span></span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>barplot <span class="op">=</span> plt.bar(df_low_intensity[<span class="st">'City'</span>], df_low_intensity[<span class="st">'Count'</span>], color<span class="op">=</span>[<span class="st">'blue'</span>, <span class="st">'orange'</span>, <span class="st">'red'</span>])</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">' LOW UHI Intensity City--DENTON'</span>)</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'City'</span>)</span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Counts of UHI Intensity'</span>)</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Highlight Denton with a different color</span></span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a>barplot[<span class="dv">0</span>].set_color(<span class="st">'green'</span>)</span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Annotate values on top of bars</span></span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> bar <span class="kw">in</span> barplot:</span>
<span id="cb41-35"><a href="#cb41-35" aria-hidden="true" tabindex="-1"></a>    yval <span class="op">=</span> bar.get_height()</span>
<span id="cb41-36"><a href="#cb41-36" aria-hidden="true" tabindex="-1"></a>    plt.text(bar.get_x() <span class="op">+</span> bar.get_width()<span class="op">/</span><span class="dv">2</span>, yval, <span class="bu">int</span>(yval), ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>)</span>
<span id="cb41-37"><a href="#cb41-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-38"><a href="#cb41-38" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-29-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="model-development" class="level1">
<h1><strong>6. Model Development</strong></h1>
<p>Model selection</p>
<p>Model Training and Validation</p>
<p>Model Evaluation</p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337959602,&quot;user_tz&quot;:420,&quot;elapsed&quot;:163,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="29">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combining datasets</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>combined_data <span class="op">=</span> pd.concat([dallas, arlington, denton])</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>combined_data <span class="op">=</span> pd.get_dummies(combined_data, columns<span class="op">=</span>[<span class="st">'Season'</span>])</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> [<span class="st">'HourlyDryBulbTemperature'</span>,<span class="st">'HourlyWetBulbTemperature'</span>,<span class="st">'HourlyRelativeHumidity'</span>,<span class="st">'HourlyDewPointTemperature'</span>,<span class="st">'HourlyPrecipitation'</span>,<span class="st">'HourlySeaLevelPressure'</span>,<span class="st">'HourlyStationPressure'</span>,<span class="st">'HourlyWindSpeed'</span>,<span class="st">'HourlyWindDirection'</span>]</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> combined_data[features]  <span class="co"># Features</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> combined_data[<span class="st">'UHI Intensity'</span>]  <span class="co"># Target variable</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.3</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the LabelEncoder</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>encoder<span class="op">=</span> LabelEncoder()</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit and transform the labels in the training and testing sets</span></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>y_train_new <span class="op">=</span> encoder.fit_transform(y_train)</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>y_test_new <span class="op">=</span> encoder.transform(y_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Model 1: Decision Tree Classifier</strong></p>
<div class="cell" data-outputid="32a77efd-9c79-4b44-8fc4-859fd759c1d2" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337960706,&quot;user_tz&quot;:420,&quot;elapsed&quot;:1108,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="30">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the model</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>dt_model <span class="op">=</span>DecisionTreeClassifier(max_depth<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>dt_model.fit(X_train, y_train)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prediction and Evaluation</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>dt_pred <span class="op">=</span> dt_model.predict(X_test)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test, dt_pred))</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> plot_tree</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the pruned decision tree</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">20</span>,<span class="dv">10</span>))</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>plot_tree(dt_model, filled<span class="op">=</span><span class="va">True</span>, feature_names<span class="op">=</span>X.columns, class_names<span class="op">=</span>np.unique(y).astype(<span class="bu">str</span>), rounded<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Decision Tree'</span>)</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/usr/local/lib/python3.10/dist-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/usr/local/lib/python3.10/dist-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/usr/local/lib/python3.10/dist-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>              precision    recall  f1-score   support

        High       0.00      0.00      0.00       200
         Low       0.72      0.69      0.70      2450
      Medium       0.87      0.90      0.89      6860

    accuracy                           0.83      9510
   macro avg       0.53      0.53      0.53      9510
weighted avg       0.81      0.83      0.82      9510
</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-31-output-3.png" class="img-fluid"></p>
</div>
</div>
<p><strong>Model 2: XGBoost Classifier</strong></p>
<div class="cell" data-outputid="cd213683-7017-4c88-8699-e8b65f6464a5" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337961662,&quot;user_tz&quot;:420,&quot;elapsed&quot;:965,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="31">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using encoded labels to train the model</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>xgb_model <span class="op">=</span> XGBClassifier()</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>xgb_model.fit(X_train, y_train_new)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prediction and Evaluation</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>xgb_pred <span class="op">=</span> xgb_model.predict(X_test)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test_new, xgb_pred))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              precision    recall  f1-score   support

           0       0.81      0.81      0.81       200
           1       0.83      0.77      0.80      2450
           2       0.92      0.94      0.93      6860

    accuracy                           0.90      9510
   macro avg       0.86      0.84      0.85      9510
weighted avg       0.89      0.90      0.90      9510
</code></pre>
</div>
</div>
<p><strong>Model 3: Gradient Boost Classifier</strong></p>
<div class="cell" data-outputid="e2e58566-b85f-40ee-b424-c9740a610530" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337971108,&quot;user_tz&quot;:420,&quot;elapsed&quot;:9449,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="32">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>gb_model <span class="op">=</span> GradientBoostingClassifier()</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>gb_model.fit(X_train, y_train_new)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Prediction and Evaluation</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>gb_pred <span class="op">=</span> gb_model.predict(X_test)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test_new, gb_pred))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              precision    recall  f1-score   support

           0       0.79      0.72      0.75       200
           1       0.79      0.68      0.73      2450
           2       0.89      0.93      0.91      6860

    accuracy                           0.86      9510
   macro avg       0.82      0.78      0.80      9510
weighted avg       0.86      0.86      0.86      9510
</code></pre>
</div>
</div>
<p><strong>Model 4: SVM Classifier</strong></p>
<div class="cell" data-outputid="5c2c3a3e-77c5-4062-b1da-b98fb598ebc1" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337990981,&quot;user_tz&quot;:420,&quot;elapsed&quot;:19877,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="33">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.svm <span class="im">import</span> SVC</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>svm_model <span class="op">=</span> SVC()</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>svm_model.fit(X_train, y_train)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Prediction and Evaluation</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>svm_pred<span class="op">=</span> svm_model.predict(X_test)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test, svm_pred))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              precision    recall  f1-score   support

        High       0.00      0.00      0.00       200
         Low       0.82      0.41      0.55      2450
      Medium       0.80      0.97      0.88      6860

    accuracy                           0.80      9510
   macro avg       0.54      0.46      0.48      9510
weighted avg       0.79      0.80      0.77      9510
</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/usr/local/lib/python3.10/dist-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/usr/local/lib/python3.10/dist-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))
/usr/local/lib/python3.10/dist-packages/sklearn/metrics/_classification.py:1344: UndefinedMetricWarning: Precision and F-score are ill-defined and being set to 0.0 in labels with no predicted samples. Use `zero_division` parameter to control this behavior.
  _warn_prf(average, modifier, msg_start, len(result))</code></pre>
</div>
</div>
<p><strong>Model 5: Random Forest Classifier</strong></p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337993253,&quot;user_tz&quot;:420,&quot;elapsed&quot;:2275,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="34">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>rfc_model <span class="op">=</span> RandomForestClassifier()</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>rfc_model.fit(X_train, y_train)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> rfc_model.predict(X_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Classification report:</strong></p>
<div class="cell" data-outputid="d4ce8cb2-698d-42de-f65c-7b98e2699d52" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337993789,&quot;user_tz&quot;:420,&quot;elapsed&quot;:539,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="35">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(classification_report(y_test, y_pred))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              precision    recall  f1-score   support

        High       0.82      0.74      0.78       200
         Low       0.84      0.79      0.81      2450
      Medium       0.92      0.94      0.93      6860

    accuracy                           0.90      9510
   macro avg       0.86      0.83      0.84      9510
weighted avg       0.90      0.90      0.90      9510
</code></pre>
</div>
</div>
<p><strong>Confusion Matrix for Random Forest Classifier</strong></p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337994283,&quot;user_tz&quot;:420,&quot;elapsed&quot;:497,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="b7ce8651-6f75-4ef6-c96d-b29ebb2de384" data-execution_count="36">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> confusion_matrix</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co"># For example, using Random Forest Classifier results</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>cm <span class="op">=</span> confusion_matrix(y_test, y_pred)</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>sns.heatmap(cm, annot<span class="op">=</span><span class="va">True</span>, fmt<span class="op">=</span><span class="st">'d'</span>, cmap<span class="op">=</span><span class="st">'Blues'</span>)</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Confusion Matrix for Random Forest Classifier'</span>)</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Predicted Label'</span>)</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'True Label'</span>)</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-37-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><strong>Feature Importance from Random Forest</strong></p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337994911,&quot;user_tz&quot;:420,&quot;elapsed&quot;:630,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="67798be9-8337-469b-f80c-7003cab0de12" data-execution_count="37">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>importances <span class="op">=</span> rfc_model.feature_importances_</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>feature_names <span class="op">=</span> X_train.columns</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>std <span class="op">=</span> np.std([tree.feature_importances_ <span class="cf">for</span> tree <span class="kw">in</span> rfc_model.estimators_], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>indices <span class="op">=</span> np.argsort(importances)[::<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Rearrange feature names so they match the sorted feature importances</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>sorted_names <span class="op">=</span> [feature_names[i] <span class="cf">for</span> i <span class="kw">in</span> indices]</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the feature importances of the forest</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Feature importances in Random Forest Classifier"</span>)</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>plt.bar(<span class="bu">range</span>(X_train.shape[<span class="dv">1</span>]), importances[indices],</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>        color<span class="op">=</span><span class="st">"r"</span>, yerr<span class="op">=</span>std[indices], align<span class="op">=</span><span class="st">"center"</span>)</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>plt.xticks(<span class="bu">range</span>(X_train.shape[<span class="dv">1</span>]), sorted_names, rotation<span class="op">=</span><span class="dv">45</span>, ha<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>plt.xlim([<span class="op">-</span><span class="dv">1</span>, X_train.shape[<span class="dv">1</span>]])</span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Importance'</span>)</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Feature'</span>)</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-38-output-1.png" class="img-fluid"></p>
</div>
</div>
<p><strong>ROC and AUC curve</strong></p>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337995402,&quot;user_tz&quot;:420,&quot;elapsed&quot;:500,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="c685061c-4fbe-41f0-c12f-cc714303e375" data-execution_count="38">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> roc_curve, auc</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> label_binarize</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Binarize the output for multi-class ROC curve</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>y_test_binarized <span class="op">=</span> label_binarize(y_test, classes<span class="op">=</span>np.unique(y_test))</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>y_pred_binarized <span class="op">=</span> label_binarize(y_pred, classes<span class="op">=</span>np.unique(y_test))</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute ROC curve and ROC area for each class</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>fpr, tpr, _ <span class="op">=</span> roc_curve(y_test_binarized.ravel(), y_pred_binarized.ravel())</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>roc_auc <span class="op">=</span> auc(fpr, tpr)</span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>plt.plot(fpr, tpr, color<span class="op">=</span><span class="st">'darkorange'</span>, lw<span class="op">=</span><span class="dv">2</span>, label<span class="op">=</span><span class="ss">f'ROC curve'</span>)</span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>plt.plot([<span class="dv">0</span>, <span class="dv">1</span>], [<span class="dv">0</span>, <span class="dv">1</span>], color<span class="op">=</span><span class="st">'navy'</span>, lw<span class="op">=</span><span class="dv">2</span>, linestyle<span class="op">=</span><span class="st">'--'</span>, label<span class="op">=</span><span class="ss">f'Area Under Curve = </span><span class="sc">{</span>roc_auc<span class="sc">:.2f}</span><span class="ss">'</span>)</span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'False Positive Rate'</span>)</span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'True Positive Rate'</span>)</span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Receiver Operating Characteristic Curve'</span>)</span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'lower right'</span>)</span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-39-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337995403,&quot;user_tz&quot;:420,&quot;elapsed&quot;:15,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="39">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a> <span class="co">#An AUC of 0.93 suggests that the classifier is performing very well</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Precision-Recall Curve</strong></p>
<div class="cell" data-outputid="76715da5-5c5a-44da-f585-c5ec16118d65" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337995628,&quot;user_tz&quot;:420,&quot;elapsed&quot;:239,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="40">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> precision_recall_curve</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>precision, recall, _ <span class="op">=</span> precision_recall_curve(y_test_binarized.ravel(), y_pred_binarized.ravel())</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>plt.plot(recall, precision, color<span class="op">=</span><span class="st">'darkorange'</span>, lw<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Recall'</span>)</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Precision'</span>)</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Precision-Recall Curve'</span>)</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-41-output-1.png" class="img-fluid"></p>
</div>
</div>
<section id="model-comparison-bar-chart" class="level2">
<h2 class="anchored" data-anchor-id="model-comparison-bar-chart"><strong>Model Comparison Bar Chart</strong></h2>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702337996061,&quot;user_tz&quot;:420,&quot;elapsed&quot;:443,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="6bc70a5b-7e95-42d5-fa5d-0389e579c874" data-execution_count="41">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>model_performance <span class="op">=</span> {</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Model'</span>: [ <span class="st">'Random</span><span class="ch">\n</span><span class="st">Forest'</span>, <span class="st">'XGBoost'</span>,<span class="st">'Gradient</span><span class="ch">\n</span><span class="st">Boosting'</span>, <span class="st">'Decision</span><span class="ch">\n</span><span class="st">Tree'</span>, <span class="st">'SVM'</span>],</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Accuracy'</span>: [ <span class="fl">0.91</span>, <span class="fl">0.90</span>, <span class="fl">0.87</span>, <span class="fl">0.83</span>, <span class="fl">0.81</span>]</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>df_performance <span class="op">=</span> pd.DataFrame(model_performance)</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>barplot <span class="op">=</span> sns.barplot(x<span class="op">=</span><span class="st">'Model'</span>, y<span class="op">=</span><span class="st">'Accuracy'</span>, data<span class="op">=</span>df_performance)</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Model Comparison by Accuracy'</span>)</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Accuracy'</span>)</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Model'</span>)</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding the text labels for each bar</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> barplot.patches:</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>    barplot.annotate(<span class="bu">format</span>(p.get_height(), <span class="st">'.2f'</span>),</span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>                     (p.get_x() <span class="op">+</span> p.get_width() <span class="op">/</span> <span class="fl">2.</span>, p.get_height()),</span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>                     ha <span class="op">=</span> <span class="st">'center'</span>, va <span class="op">=</span> <span class="st">'center'</span>,</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>                     xytext <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">9</span>),</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>                     textcoords <span class="op">=</span> <span class="st">'offset points'</span>)</span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-42-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="time-series-analysis" class="level1">
<h1><strong>7. Time Series Analysis</strong></h1>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338084423,&quot;user_tz&quot;:420,&quot;elapsed&quot;:2072,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="47">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loading the Dallas dataset from 2017-2022</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="co">#dallas22 = dallas</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co">#https://github.com/INFO-523-Exercises/project-final-Byte-Busters/blob/main/data/dallas19.csv</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>dallas21 <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/INFO-523-Exercises/project-final-Byte-Busters/main/data/dallas17.csv'</span>, header<span class="op">=</span><span class="st">'infer'</span>, low_memory<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>dallas20 <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/INFO-523-Exercises/project-final-Byte-Busters/main/data/dallas18.csv'</span>, header<span class="op">=</span><span class="st">'infer'</span>, low_memory<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>dallas19 <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/INFO-523-Exercises/project-final-Byte-Busters/main/data/dallas19.csv'</span>, header<span class="op">=</span><span class="st">'infer'</span>, low_memory<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>dallas18 <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/INFO-523-Exercises/project-final-Byte-Busters/main/data/dallas20.csv'</span>, header<span class="op">=</span><span class="st">'infer'</span>, low_memory<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>dallas17 <span class="op">=</span> pd.read_csv(<span class="st">'https://raw.githubusercontent.com/INFO-523-Exercises/project-final-Byte-Busters/main/data/dallas21.csv'</span>, header<span class="op">=</span><span class="st">'infer'</span>, low_memory<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Merging the Dallas Dataset from 2017-2022</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>daldata <span class="op">=</span> pd.concat([dallas, dallas21, dallas20, dallas19, dallas18, dallas17], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>daldata[<span class="st">'DATE'</span>] <span class="op">=</span> pd.to_datetime(daldata[<span class="st">'DATE'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338084425,&quot;user_tz&quot;:420,&quot;elapsed&quot;:8,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="49e62e44-8e9e-4045-c856-3f984d4b523e" data-execution_count="48">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>last_date <span class="op">=</span> daldata.index.<span class="bu">max</span>()</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Last Date in DataFrame:"</span>, last_date)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>last_date <span class="op">=</span> daldata[<span class="st">'DATE'</span>].<span class="bu">max</span>()</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Last Date in DataFrame:"</span>, last_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Last Date in DataFrame: 64409
Last Date in DataFrame: 2022-12-31 23:59:00</code></pre>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338084631,&quot;user_tz&quot;:420,&quot;elapsed&quot;:210,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="49">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Putting the data of Daldata into data</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> daldata</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 'UHI Intensity' to numeric</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'UHI Intensity Numeric'</span>] <span class="op">=</span> data[<span class="st">'UHI Intensity'</span>].<span class="bu">map</span>({<span class="st">'Low'</span>: <span class="dv">1</span>, <span class="st">'Medium'</span>: <span class="dv">2</span>, <span class="st">'High'</span>: <span class="dv">3</span>})</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract relevant columns</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>data_relevant <span class="op">=</span> data[[<span class="st">'DATE'</span>, <span class="st">'UHI Intensity Numeric'</span>]].copy()</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>data_relevant.set_index(<span class="st">'DATE'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>data_relevant.fillna(method<span class="op">=</span><span class="st">'ffill'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338084632,&quot;user_tz&quot;:420,&quot;elapsed&quot;:12,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-execution_count="50">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>data.sort_values(by<span class="op">=</span><span class="st">'DATE'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If you want to reset the index after sorting</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>data.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338199161,&quot;user_tz&quot;:420,&quot;elapsed&quot;:6220,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="d24b99a6-e808-4966-f3fc-71661ee75ae2" data-execution_count="53">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Feature Engineering</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>data_relevant[<span class="st">'hour'</span>] <span class="op">=</span> data_relevant.index.hour</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>data_relevant[<span class="st">'day_of_week'</span>] <span class="op">=</span> data_relevant.index.dayofweek</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>data_relevant[<span class="st">'day_of_month'</span>] <span class="op">=</span> data_relevant.index.day</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>data_relevant[<span class="st">'month'</span>] <span class="op">=</span> data_relevant.index.month</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>data_relevant[<span class="st">'lag_1'</span>] <span class="op">=</span> data_relevant[<span class="st">'UHI Intensity Numeric'</span>].shift(<span class="dv">24</span>)</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>data_relevant[<span class="st">'rolling_mean_24h'</span>] <span class="op">=</span> data_relevant[<span class="st">'UHI Intensity Numeric'</span>].rolling(window<span class="op">=</span><span class="dv">24</span>).mean()</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>data_relevant.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for model</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> data_relevant.drop(<span class="st">'UHI Intensity Numeric'</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> data_relevant[<span class="st">'UHI Intensity Numeric'</span>]</span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Train Random Forest model</span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>rf_model <span class="op">=</span> RandomForestRegressor(n_estimators<span class="op">=</span><span class="dv">100</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>rf_model.fit(X_train, y_train)</span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Forecast for the year 2023</span></span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>future_periods <span class="op">=</span> <span class="dv">365</span> <span class="op">*</span> <span class="dv">24</span>  <span class="co"># Assuming hourly data</span></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>last_date_in_data <span class="op">=</span> data[<span class="st">'DATE'</span>].<span class="bu">max</span>()</span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Last Date "</span>, last_date_in_data)</span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a>future_dates <span class="op">=</span> pd.date_range(start<span class="op">=</span>last_date_in_data <span class="op">+</span> pd.DateOffset(hours<span class="op">=</span><span class="dv">1</span>), periods<span class="op">=</span>future_periods, freq<span class="op">=</span><span class="st">'H'</span>)</span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Make sure the last date in the future dates is correct</span></span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Last Date in Future Dates "</span>, future_dates[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-28"><a href="#cb67-28" aria-hidden="true" tabindex="-1"></a>future_data <span class="op">=</span> pd.DataFrame(index<span class="op">=</span>future_dates)</span>
<span id="cb67-29"><a href="#cb67-29" aria-hidden="true" tabindex="-1"></a>future_data[<span class="st">'hour'</span>] <span class="op">=</span> future_data.index.hour</span>
<span id="cb67-30"><a href="#cb67-30" aria-hidden="true" tabindex="-1"></a>future_data[<span class="st">'day_of_week'</span>] <span class="op">=</span> future_data.index.dayofweek</span>
<span id="cb67-31"><a href="#cb67-31" aria-hidden="true" tabindex="-1"></a>future_data[<span class="st">'day_of_month'</span>] <span class="op">=</span> future_data.index.day</span>
<span id="cb67-32"><a href="#cb67-32" aria-hidden="true" tabindex="-1"></a>future_data[<span class="st">'month'</span>] <span class="op">=</span> future_data.index.month</span>
<span id="cb67-33"><a href="#cb67-33" aria-hidden="true" tabindex="-1"></a>future_data[<span class="st">'lag_1'</span>] <span class="op">=</span> data_relevant[<span class="st">'UHI Intensity Numeric'</span>][<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb67-34"><a href="#cb67-34" aria-hidden="true" tabindex="-1"></a>future_data[<span class="st">'rolling_mean_24h'</span>] <span class="op">=</span> data_relevant[<span class="st">'UHI Intensity Numeric'</span>][<span class="op">-</span><span class="dv">24</span>:].mean()</span>
<span id="cb67-35"><a href="#cb67-35" aria-hidden="true" tabindex="-1"></a>corrected_future_data <span class="op">=</span> future_data[X_train.columns]</span>
<span id="cb67-36"><a href="#cb67-36" aria-hidden="true" tabindex="-1"></a>predictions <span class="op">=</span> rf_model.predict(corrected_future_data)</span>
<span id="cb67-37"><a href="#cb67-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-38"><a href="#cb67-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a DataFrame for the forecasted data</span></span>
<span id="cb67-39"><a href="#cb67-39" aria-hidden="true" tabindex="-1"></a>forecast_start_date <span class="op">=</span> future_dates[<span class="dv">0</span>]</span>
<span id="cb67-40"><a href="#cb67-40" aria-hidden="true" tabindex="-1"></a>forecast_end_date <span class="op">=</span> future_dates[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb67-41"><a href="#cb67-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-42"><a href="#cb67-42" aria-hidden="true" tabindex="-1"></a>forecasted_dates <span class="op">=</span> pd.date_range(start<span class="op">=</span>forecast_start_date, end<span class="op">=</span>forecast_end_date, freq<span class="op">=</span><span class="st">'H'</span>)</span>
<span id="cb67-43"><a href="#cb67-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-44"><a href="#cb67-44" aria-hidden="true" tabindex="-1"></a>forecasted_data <span class="op">=</span> pd.DataFrame({<span class="st">'Forecast Date'</span>: forecasted_dates, <span class="st">'Predicted UHI Intensity'</span>: predictions})</span>
<span id="cb67-45"><a href="#cb67-45" aria-hidden="true" tabindex="-1"></a>forecasted_data.set_index(<span class="st">'Forecast Date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb67-46"><a href="#cb67-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-47"><a href="#cb67-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the forecast for the year 2023</span></span>
<span id="cb67-48"><a href="#cb67-48" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">7</span>))</span>
<span id="cb67-49"><a href="#cb67-49" aria-hidden="true" tabindex="-1"></a>plt.plot(forecasted_data.index, forecasted_data[<span class="st">'Predicted UHI Intensity'</span>], color<span class="op">=</span><span class="st">'purple'</span>)</span>
<span id="cb67-50"><a href="#cb67-50" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Forecasted UHI Intensity for the Year 2023'</span>)</span>
<span id="cb67-51"><a href="#cb67-51" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>)</span>
<span id="cb67-52"><a href="#cb67-52" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'UHI Intensity'</span>)</span>
<span id="cb67-53"><a href="#cb67-53" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb67-54"><a href="#cb67-54" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Last Date  2022-12-31 23:59:00
Last Date in Future Dates  2023-12-31 23:59:00</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-47-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338199347,&quot;user_tz&quot;:420,&quot;elapsed&quot;:188,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="1183f2cd-9da4-4f0a-d0b2-595e987850db" data-execution_count="54">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error, r2_score</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Make predictions on the test set</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> rf_model.predict(X_test)</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate Mean Squared Error (MSE) and R-squared (R2) for evaluation</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>mse <span class="op">=</span> mean_squared_error(y_test, y_pred)</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test, y_pred)</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Mean Squared Error (MSE): </span><span class="sc">{</span>mse<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'R-squared (R2): </span><span class="sc">{</span>r2<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="co"># If you want to print the accuracy in percentage (optional)</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>accuracy_percentage <span class="op">=</span> rf_model.score(X_test, y_test) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Accuracy: </span><span class="sc">{</span>accuracy_percentage<span class="sc">:.2f}</span><span class="ss">%'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Mean Squared Error (MSE): 0.008995981109937955
R-squared (R2): 0.7844277883499733
Accuracy: 78.44%</code></pre>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338200309,&quot;user_tz&quot;:420,&quot;elapsed&quot;:968,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="3390b2aa-fac8-44af-9267-780e639724b9" data-execution_count="55">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Selecting the years 2017-2022 data from the original dataset</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>actual_2022_data <span class="op">=</span> data_relevant[data_relevant.index.year.isin(<span class="bu">range</span>(<span class="dv">2017</span>, <span class="dv">2023</span>))]</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">7</span>))</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the actual data for the years 2017-2022</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>plt.plot(actual_2022_data.index, actual_2022_data[<span class="st">'UHI Intensity Numeric'</span>], label<span class="op">=</span><span class="st">'Actual UHI Intensity 2017-2022'</span>, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the forecasted data for the year 2023</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>plt.plot(forecasted_data.index, forecasted_data[<span class="st">'Predicted UHI Intensity'</span>], label<span class="op">=</span><span class="st">'Forecasted UHI Intensity 2023'</span>, color<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatting the plot</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Actual UHI Intensity for 2017-2022 and Forecasted UHI Intensity for 2023'</span>)</span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>)</span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'UHI Intensity'</span>)</span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-49-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338200873,&quot;user_tz&quot;:420,&quot;elapsed&quot;:571,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="0816cd01-dd61-41bc-ab57-31e0b10aa6c5" data-execution_count="56">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Round the predicted values to the nearest whole number</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>rounded_predictions <span class="op">=</span> np.<span class="bu">round</span>(predictions)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a DataFrame for the forecasted data with rounded values</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>rounded_forecasted_data <span class="op">=</span> pd.DataFrame({<span class="st">'Forecast Date'</span>: forecasted_dates, <span class="st">'Predicted UHI Intensity'</span>: rounded_predictions})</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>rounded_forecasted_data.set_index(<span class="st">'Forecast Date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the forecast for the year 2023 with whole numbers</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">7</span>))</span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the actual data for the years 2017-2022</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>plt.plot(actual_2022_data.index, actual_2022_data[<span class="st">'UHI Intensity Numeric'</span>], label<span class="op">=</span><span class="st">'Actual UHI Intensity 2017-2022'</span>, color<span class="op">=</span><span class="st">'blue'</span>)</span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the original forecasted data for the year 2023</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.plot(forecasted_data.index, forecasted_data['Predicted UHI Intensity'], label='Forecasted UHI Intensity 2023 (Original)', color='red')</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plotting the forecasted data for the year 2023 with whole numbers</span></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a>plt.plot(rounded_forecasted_data.index, rounded_forecasted_data[<span class="st">'Predicted UHI Intensity'</span>], label<span class="op">=</span><span class="st">'Forecasted UHI Intensity 2023 (Rounded)'</span>, color<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Formatting the plot</span></span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Actual UHI Intensity for 2017-2022 and Forecasted UHI Intensity for 2023'</span>)</span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Date'</span>)</span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'UHI Intensity'</span>)</span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb72-25"><a href="#cb72-25" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb72-26"><a href="#cb72-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-27"><a href="#cb72-27" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-50-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338201549,&quot;user_tz&quot;:420,&quot;elapsed&quot;:694,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="6409a49c-81b8-42e0-f3f1-8c5c8734f44b" data-execution_count="57">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the rounded forecasted data unique values and their counts</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>rounded_forecasted_unique_values, rounded_forecasted_counts <span class="op">=</span> np.unique(rounded_predictions, return_counts<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> value, count <span class="kw">in</span> <span class="bu">zip</span>(rounded_forecasted_unique_values, rounded_forecasted_counts):</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'UHI Intensity </span><span class="sc">{</span><span class="bu">int</span>(value)<span class="sc">}</span><span class="ss">: Count - </span><span class="sc">{</span>count<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset the index of actual_2022_data to make 'DATE' a regular column</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>actual_2022_selected <span class="op">=</span> actual_2022_data.reset_index()[[<span class="st">'DATE'</span>, <span class="st">'UHI Intensity Numeric'</span>]].copy()</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract 'Year' from 'DATE'</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>actual_2022_selected[<span class="st">'Year'</span>] <span class="op">=</span> actual_2022_selected[<span class="st">'DATE'</span>].dt.year</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Display unique 'Year' values in actual_2022_selected</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Unique Years in actual_2022_selected:"</span>, actual_2022_selected[<span class="st">'Year'</span>].unique())</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">8</span>))</span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Map UHI Intensity levels to descriptive labels</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>uhi_intensity_labels <span class="op">=</span> {<span class="dv">1</span>: <span class="st">'Low'</span>, <span class="dv">2</span>: <span class="st">'Medium'</span>, <span class="dv">3</span>: <span class="st">'High'</span>}</span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>actual_2022_selected[<span class="st">'UHI Intensity Labels'</span>] <span class="op">=</span> actual_2022_selected[<span class="st">'UHI Intensity Numeric'</span>].<span class="bu">map</span>(uhi_intensity_labels)</span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Define custom colors for UHI Intensity levels with transparency (red, blue, green)</span></span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a>custom_palette <span class="op">=</span> sns.color_palette([<span class="st">'red'</span>, <span class="st">'blue'</span>, <span class="st">'green'</span>], <span class="bu">len</span>(uhi_intensity_labels))</span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a countplot for 2022 data</span></span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a>ax1 <span class="op">=</span> sns.countplot(data<span class="op">=</span>actual_2022_selected, x<span class="op">=</span><span class="st">'Year'</span>, hue<span class="op">=</span><span class="st">'UHI Intensity Labels'</span>, palette<span class="op">=</span>custom_palette)</span>
<span id="cb73-27"><a href="#cb73-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-28"><a href="#cb73-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust transparency of the bars</span></span>
<span id="cb73-29"><a href="#cb73-29" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> patch <span class="kw">in</span> ax1.patches:</span>
<span id="cb73-30"><a href="#cb73-30" aria-hidden="true" tabindex="-1"></a>    current_color <span class="op">=</span> patch.get_facecolor()</span>
<span id="cb73-31"><a href="#cb73-31" aria-hidden="true" tabindex="-1"></a>    new_color <span class="op">=</span> (<span class="op">*</span>current_color[:<span class="dv">3</span>], <span class="fl">0.7</span>)  <span class="co"># Set alpha to 0.7 (adjust as needed)</span></span>
<span id="cb73-32"><a href="#cb73-32" aria-hidden="true" tabindex="-1"></a>    patch.set_facecolor(new_color)</span>
<span id="cb73-33"><a href="#cb73-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-34"><a href="#cb73-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Add data labels on top of each bar</span></span>
<span id="cb73-35"><a href="#cb73-35" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> ax1.patches:</span>
<span id="cb73-36"><a href="#cb73-36" aria-hidden="true" tabindex="-1"></a>    height <span class="op">=</span> p.get_height()</span>
<span id="cb73-37"><a href="#cb73-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> height <span class="op">&gt;</span> <span class="dv">0</span>:  <span class="co"># To avoid adding labels for bars with zero count</span></span>
<span id="cb73-38"><a href="#cb73-38" aria-hidden="true" tabindex="-1"></a>        ax1.annotate(<span class="ss">f'</span><span class="sc">{</span><span class="bu">int</span>(height)<span class="sc">}</span><span class="ss">'</span>, (p.get_x() <span class="op">+</span> p.get_width() <span class="op">/</span> <span class="fl">2.</span>, height), ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>, fontsize<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">'black'</span>, weight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb73-39"><a href="#cb73-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-40"><a href="#cb73-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Set plot labels and legend</span></span>
<span id="cb73-41"><a href="#cb73-41" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Count of Years for Different UHI Intensity Levels 2017-2022'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb73-42"><a href="#cb73-42" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb73-43"><a href="#cb73-43" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Count'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb73-44"><a href="#cb73-44" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'UHI Intensity'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.05</span>, <span class="dv">1</span>), loc<span class="op">=</span><span class="st">'upper left'</span>)</span>
<span id="cb73-45"><a href="#cb73-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-46"><a href="#cb73-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize tick labels on x-axis</span></span>
<span id="cb73-47"><a href="#cb73-47" aria-hidden="true" tabindex="-1"></a>ax1.set_xticklabels(ax1.get_xticklabels(), rotation<span class="op">=</span><span class="dv">0</span>, ha<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb73-48"><a href="#cb73-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-49"><a href="#cb73-49" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>UHI Intensity 2: Count - 8760
Unique Years in actual_2022_selected: [2022 2017 2018 2019 2020 2021]</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-51-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-executioninfo="{&quot;status&quot;:&quot;ok&quot;,&quot;timestamp&quot;:1702338201914,&quot;user_tz&quot;:420,&quot;elapsed&quot;:369,&quot;user&quot;:{&quot;displayName&quot;:&quot;Kendall Beaver&quot;,&quot;userId&quot;:&quot;07666359968925340771&quot;}}" data-outputid="04ff8b35-e710-40f2-a885-cecbad67533a" data-execution_count="58">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Reset the index of rounded_forecasted_data to make 'Forecast Date' a regular column</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>rounded_forecasted_selected <span class="op">=</span> rounded_forecasted_data.reset_index()[[<span class="st">'Forecast Date'</span>, <span class="st">'Predicted UHI Intensity'</span>]].copy()</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract 'Year' from 'Forecast Date'</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>rounded_forecasted_selected[<span class="st">'Year'</span>] <span class="op">=</span> rounded_forecasted_selected[<span class="st">'Forecast Date'</span>].dt.year</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Map UHI Intensity levels to descriptive labels for 2023 data</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>rounded_forecasted_selected[<span class="st">'UHI Intensity Labels'</span>] <span class="op">=</span> rounded_forecasted_selected[<span class="st">'Predicted UHI Intensity'</span>].<span class="bu">map</span>(uhi_intensity_labels)</span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a countplot for 2023 data</span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>ax2 <span class="op">=</span> sns.countplot(data<span class="op">=</span>rounded_forecasted_selected, x<span class="op">=</span><span class="st">'Year'</span>, hue<span class="op">=</span><span class="st">'UHI Intensity Labels'</span>, palette<span class="op">=</span>custom_palette)</span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjust transparency of the bars</span></span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> patch <span class="kw">in</span> ax2.patches:</span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>    current_color <span class="op">=</span> patch.get_facecolor()</span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a>    new_color <span class="op">=</span> (<span class="op">*</span>current_color[:<span class="dv">3</span>], <span class="fl">0.7</span>)  <span class="co"># Set alpha to 0.7 (adjust as needed)</span></span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a>    patch.set_facecolor(new_color)</span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Add data labels on top of each bar</span></span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> p <span class="kw">in</span> ax2.patches:</span>
<span id="cb75-23"><a href="#cb75-23" aria-hidden="true" tabindex="-1"></a>    height <span class="op">=</span> p.get_height()</span>
<span id="cb75-24"><a href="#cb75-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> height <span class="op">&gt;</span> <span class="dv">0</span>:  <span class="co"># To avoid adding labels for bars with zero count</span></span>
<span id="cb75-25"><a href="#cb75-25" aria-hidden="true" tabindex="-1"></a>        ax2.annotate(<span class="ss">f'</span><span class="sc">{</span><span class="bu">int</span>(height)<span class="sc">}</span><span class="ss">'</span>, (p.get_x() <span class="op">+</span> p.get_width() <span class="op">/</span> <span class="fl">2.</span>, height), ha<span class="op">=</span><span class="st">'center'</span>, va<span class="op">=</span><span class="st">'bottom'</span>, fontsize<span class="op">=</span><span class="dv">10</span>, color<span class="op">=</span><span class="st">'black'</span>, weight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb75-26"><a href="#cb75-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-27"><a href="#cb75-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Set plot labels and legend</span></span>
<span id="cb75-28"><a href="#cb75-28" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Count of Years for Different UHI Intensity Levels - 2023'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)</span>
<span id="cb75-29"><a href="#cb75-29" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb75-30"><a href="#cb75-30" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Count'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb75-31"><a href="#cb75-31" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'UHI Intensity'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">1.05</span>, <span class="dv">1</span>), loc<span class="op">=</span><span class="st">'upper left'</span>)</span>
<span id="cb75-32"><a href="#cb75-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-33"><a href="#cb75-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Customize tick labels on x-axis</span></span>
<span id="cb75-34"><a href="#cb75-34" aria-hidden="true" tabindex="-1"></a>ax2.set_xticklabels(ax2.get_xticklabels(), rotation<span class="op">=</span><span class="dv">0</span>, ha<span class="op">=</span><span class="st">'right'</span>)</span>
<span id="cb75-35"><a href="#cb75-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-36"><a href="#cb75-36" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="code_files/figure-html/cell-52-output-1.png" class="img-fluid"></p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>